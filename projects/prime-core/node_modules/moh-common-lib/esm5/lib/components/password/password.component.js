/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Component, Input, Output, EventEmitter, HostListener, forwardRef } from '@angular/core';
import { Base } from '../../../models/src/base';
import { ControlContainer, NgForm } from '@angular/forms';
import * as zxcvbn_ from 'zxcvbn';
// Awkward necessary workaround due to bug in build tools
// https://github.com/jvandemo/generator-angular2-library/issues/221#issuecomment-355945207
/** @type {?} */
var zxcvbn = zxcvbn_;
/**
 * Interface for passing in error messages
 * Example:
 *  errorMessages = {
 *       required: this.componentLabel + ' is required.',
 *       minLength: this.componentLabel + ' must be ' + this.minLen + ' characters.',
 *       criteria: this.componentLabel + ' does not meet password criteria.'
 *     }
 * @record
 */
export function PasswordErrorMsg() { }
if (false) {
    /** @type {?|undefined} */
    PasswordErrorMsg.prototype.required;
    /** @type {?|undefined} */
    PasswordErrorMsg.prototype.minLength;
    /** @type {?|undefined} */
    PasswordErrorMsg.prototype.criteria;
}
/**
 * PasswordComponent is a text input for a user's password. It includes:
 *
 * - A password strength bar
 * - Minimum length validations
 *
 * Note - if your application has requirements to check things like username is not
 * present in password, we recommend doing this in the (passwordChange) callback.
 *
 * \@example
 *       <common-password componentLabel="{{newPwdLabel}}"
 *                      [showPasswordStrength]="true"
 *                      [minLen]="pwdMinLen"
 *                      [pwdCriteria]="pwdValidChars"
 *                      [password]="data.password"
 *                      (passwordChange)="setNewPassword($event)"></common-password>
 *
 * @export
 */
var PasswordComponent = /** @class */ (function (_super) {
    tslib_1.__extends(PasswordComponent, _super);
    function PasswordComponent() {
        var _this = _super.call(this) || this;
        // Inputs for the component
        _this.label = 'Password';
        _this.isRequired = true;
        _this.isDisabled = false;
        _this.minLen = '8';
        _this.maxLen = '32';
        _this.showPasswordStrength = false;
        _this.objectID = 'password_' + _this.objectId;
        // Output from the component
        _this.passwordChange = new EventEmitter();
        _this.blurEvent = new EventEmitter();
        // Flag for the fa-eye to show or hide password
        _this.hideValue = true;
        _this.strengthPercentage = 0;
        // default messages
        _this.requiredMsgSeg = ' is required.';
        _this.minLenMsgSeg1 = ' must be at least ';
        _this.minLenMsgSeg2 = ' characters in length.';
        _this.criteriaMsg = ' contains invalid characters.';
        return _this;
    }
    /**
     * @return {?}
     */
    PasswordComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        // Set default messages
        this.errMsg = {
            required: this.label + this.requiredMsgSeg,
            minLength: this.label + this.minLenMsgSeg1 + this.minLen + this.minLenMsgSeg2,
            criteria: this.label + this.criteriaMsg
        };
        // Replace default message if provided
        if (this.errorMessages) {
            if (this.errorMessages.required) {
                this.errMsg.required = this.errorMessages.required;
            }
            if (this.errorMessages.minLength) {
                this.errMsg.minLength = this.errorMessages.minLength;
            }
            if (this.errorMessages.criteria) {
                this.errMsg.criteria = this.errorMessages.criteria;
            }
        }
    };
    /**
     * @param {?} changes
     * @return {?}
     */
    PasswordComponent.prototype.ngOnChanges = /**
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
        if (changes.password && this.password) {
            // Check strength of password
            this.pswdStrength = this.getPasswordStrength(this.password);
            this.strengthPercentage = ((this.pswdStrength + 1) / 5) * 100;
        }
    };
    /**
     * Passes the value entered back to the calling component
     * @param password value the was entered by
     */
    /**
     * Passes the value entered back to the calling component
     * @param {?} password value the was entered by
     * @return {?}
     */
    PasswordComponent.prototype.setPassword = /**
     * Passes the value entered back to the calling component
     * @param {?} password value the was entered by
     * @return {?}
     */
    function (password) {
        this.passwordChange.emit(password);
    };
    /**
     * @param {?} $event
     * @return {?}
     */
    PasswordComponent.prototype.onInputBlur = /**
     * @param {?} $event
     * @return {?}
     */
    function ($event) {
        console.log('onBlur: ', event);
        this.blurEvent.emit(event);
    };
    // Prevent user from pasting data into the text box
    // Prevent user from pasting data into the text box
    /**
     * @param {?} event
     * @return {?}
     */
    PasswordComponent.prototype.onPaste = 
    // Prevent user from pasting data into the text box
    /**
     * @param {?} event
     * @return {?}
     */
    function (event) {
        return false;
    };
    /**
     * Get the strength of the password
  
     *    0 = too guessable: risky password. (guesses < 10^3)
     *    1 = very guessable: protection from throttled online attacks. (guesses < 10^6)
     *    2 = somewhat guessable: protection from unthrottled online attacks. (guesses < 10^8)
     *    3 = safely unguessable: moderate protection from offline slow-hash scenario. (guesses < 10^10)
     *    4 = very unguessable: strong protection from offline slow-hash scenario. (guesses >= 10^10)
     *
     *  https://github.com/dropbox/zxcvbn
     */
    /**
     * Get the strength of the password
     *    0 = too guessable: risky password. (guesses < 10^3)
     *    1 = very guessable: protection from throttled online attacks. (guesses < 10^6)
     *    2 = somewhat guessable: protection from unthrottled online attacks. (guesses < 10^8)
     *    3 = safely unguessable: moderate protection from offline slow-hash scenario. (guesses < 10^10)
     *    4 = very unguessable: strong protection from offline slow-hash scenario. (guesses >= 10^10)
     *
     *  https://github.com/dropbox/zxcvbn
     * @private
     * @param {?} password
     * @return {?}
     */
    PasswordComponent.prototype.getPasswordStrength = /**
     * Get the strength of the password
     *    0 = too guessable: risky password. (guesses < 10^3)
     *    1 = very guessable: protection from throttled online attacks. (guesses < 10^6)
     *    2 = somewhat guessable: protection from unthrottled online attacks. (guesses < 10^8)
     *    3 = safely unguessable: moderate protection from offline slow-hash scenario. (guesses < 10^10)
     *    4 = very unguessable: strong protection from offline slow-hash scenario. (guesses >= 10^10)
     *
     *  https://github.com/dropbox/zxcvbn
     * @private
     * @param {?} password
     * @return {?}
     */
    function (password) {
        // Password strength feedback
        /** @type {?} */
        var pswdFeedback = zxcvbn(password);
        return pswdFeedback.score;
    };
    PasswordComponent.decorators = [
        { type: Component, args: [{
                    selector: 'common-password',
                    template: "<label class=\"control-label\" for=\"{{objectID}}\">{{label}}</label>\n<input #pswdRef=\"ngModel\"\n       type=\"{{hideValue? 'password': 'text'}}\"\n       class=\"form-control password-field\"\n       name=\"{{objectID}}\"\n       id=\"{{objectID}}\"\n       [ngModel]=\"password\"\n       (ngModelChange)=\"setPassword($event)\"\n       (blur)=\"onInputBlur($event)\"\n       [pattern]=\"pwdCriteria\"\n       [required]=\"isRequired\"\n       [minlength]=\"minLen\"\n       [maxlength]=\"maxLen\"\n       [disabled]=\"isDisabled\" />\n<span class=\"fa fa-fw {{hideValue? 'fa-eye' : 'fa-eye-slash'}} password-field-icon\"\n      (click)='hideValue = !hideValue'></span>\n<div *ngIf='password && showPasswordStrength'>\n<!-- The progress bar -->\n  <div class=\"progress password-strength-bar\" >\n    <div class=\"progress-bar {{pswdStrength >= 4? 'bg-success' : (pswdStrength >= 3? 'bg-warning' : 'bg-danger')}}\"\n        role=\"progressbar\"\n        [style.width]='strengthPercentage + \"%\"'\n        [attr.aria-valuenow]=\"strengthPercentage\"\n        aria-valuemin=\"0\"\n        aria-valuemax=\"100\">\n    </div>\n  </div>\n  <span class=\"password-progress-label {{pswdStrength >= 4? 'text-success' : (pswdStrength >= 3? 'text-warning' : 'text-danger')}}\"></span>\n</div>\n<!-- Error messages for component -->\n<div *ngIf=\"!pswdRef.disabled && (pswdRef.touched || pswdRef.dirty)\"\n    role=\"alert\"\n    class='error-container'\n    aria-live=\"assertive\">\n  <div class=\"text-danger\" *ngIf=\"pswdRef?.errors?.required\">\n    {{errMsg.required}}\n  </div>\n  <div class=\"text-danger\" *ngIf=\"pswdRef?.errors?.minlength\">\n      {{errMsg.minLength}}\n  </div>\n  <div class=\"text-danger\" *ngIf=\"pswdRef?.errors?.pattern && !pswdRef?.errors?.minlength\">\n      {{errMsg.criteria}}\n  </div>\n</div>\n\n",
                    /* Re-use the same ngForm that it's parent is using. The component will show
                       * up in its parents `this.form`, and will auto-update `this.form.valid`
                       */
                    viewProviders: [{ provide: ControlContainer, useExisting: forwardRef((/**
                             * @return {?}
                             */
                            function () { return NgForm; })) }],
                    styles: [".password-field-icon{float:right;margin-left:-25px;margin-top:-25px;margin-right:.5rem;position:relative;z-index:2}.password-field{padding-right:2rem}.password-strength-bar{min-width:0;max-width:75%;height:.5rem;margin-top:1em}.password-progress-label{float:right;margin-left:-15px;margin-top:-15px;position:relative;z-index:2}.password-strength-bar+.text-success::after{content:'Good'}.password-strength-bar+.text-warning::after{content:'OK'}.password-strength-bar+.text-danger::after{content:'Bad'}input{width:100%}input[type=password]::-ms-clear,input[type=password]::-ms-reveal{display:none}"]
                }] }
    ];
    /** @nocollapse */
    PasswordComponent.ctorParameters = function () { return []; };
    PasswordComponent.propDecorators = {
        label: [{ type: Input }],
        isRequired: [{ type: Input }],
        isDisabled: [{ type: Input }],
        password: [{ type: Input }],
        pwdCriteria: [{ type: Input }],
        minLen: [{ type: Input }],
        maxLen: [{ type: Input }],
        errorMessages: [{ type: Input }],
        showPasswordStrength: [{ type: Input }],
        objectID: [{ type: Input }],
        passwordChange: [{ type: Output }],
        blurEvent: [{ type: Output }],
        onPaste: [{ type: HostListener, args: ['document:paste', ['$event'],] }]
    };
    return PasswordComponent;
}(Base));
export { PasswordComponent };
if (false) {
    /** @type {?} */
    PasswordComponent.prototype.label;
    /** @type {?} */
    PasswordComponent.prototype.isRequired;
    /** @type {?} */
    PasswordComponent.prototype.isDisabled;
    /** @type {?} */
    PasswordComponent.prototype.password;
    /** @type {?} */
    PasswordComponent.prototype.pwdCriteria;
    /** @type {?} */
    PasswordComponent.prototype.minLen;
    /** @type {?} */
    PasswordComponent.prototype.maxLen;
    /** @type {?} */
    PasswordComponent.prototype.errorMessages;
    /** @type {?} */
    PasswordComponent.prototype.showPasswordStrength;
    /** @type {?} */
    PasswordComponent.prototype.objectID;
    /** @type {?} */
    PasswordComponent.prototype.passwordChange;
    /** @type {?} */
    PasswordComponent.prototype.blurEvent;
    /** @type {?} */
    PasswordComponent.prototype.hideValue;
    /** @type {?} */
    PasswordComponent.prototype.pswdStrength;
    /** @type {?} */
    PasswordComponent.prototype.strengthPercentage;
    /** @type {?} */
    PasswordComponent.prototype.errMsg;
    /**
     * @type {?}
     * @private
     */
    PasswordComponent.prototype.requiredMsgSeg;
    /**
     * @type {?}
     * @private
     */
    PasswordComponent.prototype.minLenMsgSeg1;
    /**
     * @type {?}
     * @private
     */
    PasswordComponent.prototype.minLenMsgSeg2;
    /**
     * @type {?}
     * @private
     */
    PasswordComponent.prototype.criteriaMsg;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGFzc3dvcmQuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vbW9oLWNvbW1vbi1saWIvIiwic291cmNlcyI6WyJsaWIvY29tcG9uZW50cy9wYXNzd29yZC9wYXNzd29yZC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFVLEtBQUssRUFBRSxNQUFNLEVBQUUsWUFBWSxFQUFFLFlBQVksRUFBd0IsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQy9ILE9BQU8sRUFBRSxJQUFJLEVBQUUsTUFBTSwwQkFBMEIsQ0FBQztBQUNoRCxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDMUQsT0FBTyxLQUFLLE9BQU8sTUFBTSxRQUFRLENBQUM7Ozs7SUFHNUIsTUFBTSxHQUFHLE9BQU87Ozs7Ozs7Ozs7O0FBV3RCLHNDQUlDOzs7SUFIQyxvQ0FBa0I7O0lBQ2xCLHFDQUFtQjs7SUFDbkIsb0NBQWtCOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFxQnBCO0lBU3VDLDZDQUFJO0lBaUN6QztRQUFBLFlBQ0UsaUJBQU8sU0FDUjs7UUFoQ1EsV0FBSyxHQUFXLFVBQVUsQ0FBQztRQUMzQixnQkFBVSxHQUFZLElBQUksQ0FBQztRQUMzQixnQkFBVSxHQUFZLEtBQUssQ0FBQztRQUc1QixZQUFNLEdBQVksR0FBRyxDQUFDO1FBQ3RCLFlBQU0sR0FBWSxJQUFJLENBQUM7UUFFdkIsMEJBQW9CLEdBQVksS0FBSyxDQUFDO1FBQ3RDLGNBQVEsR0FBVyxXQUFXLEdBQUcsS0FBSSxDQUFDLFFBQVEsQ0FBQzs7UUFJOUMsb0JBQWMsR0FBeUIsSUFBSSxZQUFZLEVBQVUsQ0FBQztRQUNsRSxlQUFTLEdBQUcsSUFBSSxZQUFZLEVBQUUsQ0FBQzs7UUFHbEMsZUFBUyxHQUFHLElBQUksQ0FBQztRQUVqQix3QkFBa0IsR0FBRyxDQUFDLENBQUM7O1FBS3RCLG9CQUFjLEdB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LEtBQUs7Z0NBQ0wsS0FBSzt1Q0FDTCxLQUFLOzJCQUNMLEtBQUs7aUNBSUwsTUFBTTs0QkFDTixNQUFNOzBCQXFFTixZQUFZLFNBQUUsZ0JBQWdCLEVBQUUsQ0FBQyxRQUFRLENBQUM7O0lBcUI3Qyx3QkFBQztDQUFBLEFBcEhELENBU3VDLElBQUksR0EyRzFDO1NBM0dZLGlCQUFpQjs7O0lBRzVCLGtDQUFvQzs7SUFDcEMsdUNBQW9DOztJQUNwQyx1Q0FBcUM7O0lBQ3JDLHFDQUEwQjs7SUFDMUIsd0NBQXNDOztJQUN0QyxtQ0FBK0I7O0lBQy9CLG1DQUFnQzs7SUFDaEMsMENBQXlDOztJQUN6QyxpREFBK0M7O0lBQy9DLHFDQUF3RDs7SUFJeEQsMkNBQTRFOztJQUM1RSxzQ0FBeUM7O0lBR3pDLHNDQUF3Qjs7SUFDeEIseUNBQTRCOztJQUM1QiwrQ0FBOEI7O0lBRTlCLG1DQUFnQzs7Ozs7SUFHaEMsMkNBQWlEOzs7OztJQUNqRCwwQ0FBcUQ7Ozs7O0lBQ3JELDBDQUF5RDs7Ozs7SUFDekQsd0NBQThEIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQsIElucHV0LCBPdXRwdXQsIEV2ZW50RW1pdHRlciwgSG9zdExpc3RlbmVyLCBPbkNoYW5nZXMsIERpcmVjdGl2ZSwgZm9yd2FyZFJlZiB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQmFzZSB9IGZyb20gJy4uLy4uLy4uL21vZGVscy9zcmMvYmFzZSc7XG5pbXBvcnQgeyBDb250cm9sQ29udGFpbmVyLCBOZ0Zvcm0gfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XG5pbXBvcnQgKiBhcyB6eGN2Ym5fIGZyb20gJ3p4Y3Zibic7XG4vLyBBd2t3YXJkIG5lY2Vzc2FyeSB3b3JrYXJvdW5kIGR1ZSB0byBidWcgaW4gYnVpbGQgdG9vbHNcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9qdmFuZGVtby9nZW5lcmF0b3ItYW5ndWxhcjItbGlicmFyeS9pc3N1ZXMvMjIxI2lzc3VlY29tbWVudC0zNTU5NDUyMDdcbmNvbnN0IHp4Y3ZibiA9IHp4Y3Zibl87XG5cbi8qKlxuICogSW50ZXJmYWNlIGZvciBwYXNzaW5nIGluIGVycm9yIG1lc3NhZ2VzXG4gKiBFeGFtcGxlOlxuICogIGVycm9yTWVzc2FnZXMgPSB7XG4gKiAgICAgICByZXF1aXJlZDogdGhpcy5jb21wb25lbnRMYWJlbCArICcgaXMgcmVxdWlyZWQuJyxcbiAqICAgICAgIG1pbkxlbmd0aDogdGhpcy5jb21wb25lbnRMYWJlbCArICcgbXVzdCBiZSAnICsgdGhpcy5taW5MZW4gKyAnIGNoYXJhY3RlcnMuJyxcbiAqICAgICAgIGNyaXRlcmlhOiB0aGlzLmNvbXBvbmVudExhYmVsICsgJyBkb2VzIG5vdCBtZWV0IHBhc3N3b3JkIGNyaXRlcmlhLidcbiAqICAgICB9XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUGFzc3dvcmRFcnJvck1zZyB7XG4gIHJlcXVpcmVkPzogc3RyaW5nO1xuICBtaW5MZW5ndGg/OiBzdHJpbmc7XG4gIGNyaXRlcmlhPzogc3RyaW5nO1xufVxuLyoqXG4gKiBQYXNzd29yZENvbXBvbmVudCBpcyBhIHRleHQgaW5wdXQgZm9yIGEgdXNlcidzIHBhc3N3b3JkLiBJdCBpbmNsdWRlczpcbiAqXG4gKiAtIEEgcGFzc3dvcmQgc3RyZW5ndGggYmFyXG4gKiAtIE1pbmltdW0gbGVuZ3RoIHZhbGlkYXRpb25zXG4gKlxuICogTm90ZSAtIGlmIHlvdXIgYXBwbGljYXRpb24gaGFzIHJlcXVpcmVtZW50cyB0byBjaGVjayB0aGluZ3MgbGlrZSB1c2VybmFtZSBpcyBub3RcbiAqIHByZXNlbnQgaW4gcGFzc3dvcmQsIHdlIHJlY29tbWVuZCBkb2luZyB0aGlzIGluIHRoZSAocGFzc3dvcmRDaGFuZ2UpIGNhbGxiYWNrLlxuICpcbiAqIEBleGFtcGxlXG4gKiAgICAgICA8Y29tbW9uLXBhc3N3b3JkIGNvbXBvbmVudExhYmVsPVwie3tuZXdQd2RMYWJlbH19XCJcbiAqICAgICAgICAgICAgICAgICAgICAgIFtzaG93UGFzc3dvcmRTdHJlbmd0aF09XCJ0cnVlXCJcbiAqICAgICAgICAgICAgICAgICAgICAgIFttaW5MZW5dPVwicHdkTWluTGVuXCJcbiAqICAgICAgICAgICAgICAgICAgICAgIFtwd2RDcml0ZXJpYV09XCJwd2RWYWxpZENoYXJzXCJcbiAqICAgICAgICAgICAgICAgICAgICAgIFtwYXNzd29yZF09XCJkYXRhLnBhc3N3b3JkXCJcbiAqICAgICAgICAgICAgICAgICAgICAgIChwYXNzd29yZENoYW5nZSk9XCJzZXROZXdQYXNzd29yZCgkZXZlbnQpXCI+PC9jb21tb24tcGFzc3dvcmQ+XG4gKlxuICogQGV4cG9ydFxuICovXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdjb21tb24tcGFzc3dvcmQnLFxuICB0ZW1wbGF0ZVVybDogJy4vcGFzc3dvcmQuY29tcG9uZW50Lmh0bWwnLFxuICBzdHlsZVVybHM6IFsnLi9wYXNzd29yZC5jb21wb25lbnQuc2NzcyddLFxuICAvKiBSZS11c2UgdGhlIHNhbWUgbmdGb3JtIHRoYXQgaXQncyBwYXJlbnQgaXMgdXNpbmcuIFRoZSBjb21wb25lbnQgd2lsbCBzaG93XG4gICAqIHVwIGluIGl0cyBwYXJlbnRzIGB0aGlzLmZvcm1gLCBhbmQgd2lsbCBhdXRvLXVwZGF0ZSBgdGhpcy5mb3JtLnZhbGlkYFxuICAgKi9cbiAgdmlld1Byb3ZpZGVyczogWyB7IHByb3ZpZGU6IENvbnRyb2xDb250YWluZXIsIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpID0+IE5nRm9ybSApIH0gXVxufSlcbmV4cG9ydCBjbGFzcyBQYXNzd29yZENvbXBvbmVudCBleHRlbmRzIEJhc2UgaW1wbGVtZW50cyBPbkluaXQsIE9uQ2hhbmdlcyB7XG5cbiAgLy8gSW5wdXRzIGZvciB0aGUgY29tcG9uZW50XG4gIEBJbnB1dCgpIGxhYmVsOiBzdHJpbmcgPSAnUGFzc3dvcmQnO1xuICBASW5wdXQoKSBpc1JlcXVpcmVkOiBib29sZWFuID0gdHJ1ZTtcbiAgQElucHV0KCkgaXNEaXNhYmxlZDogYm9vbGVhbiA9IGZhbHNlO1xuICBASW5wdXQoKSBwYXNzd29yZDogc3RyaW5nO1xuICBASW5wdXQoKSBwd2RDcml0ZXJpYTogc3RyaW5nIHwgUmVnRXhwO1xuICBASW5wdXQoKSBtaW5MZW46IHN0cmluZyAgPSAnOCc7XG4gIEBJbnB1dCgpIG1heExlbjogc3RyaW5nICA9ICczMic7XG4gIEBJbnB1dCgpIGVycm9yTWVzc2FnZXM6IFBhc3N3b3JkRXJyb3JNc2c7XG4gIEBJbnB1dCgpIHNob3dQYXNzd29yZFN0cmVuZ3RoOiBib29sZWFuID0gZmFsc2U7XG4gIEBJbnB1dCgpIG9iamVjdElEOiBzdHJpbmcgPSAncGFzc3dvcmRfJyArIHRoaXMub2JqZWN0SWQ7XG5cblxuICAvLyBPdXRwdXQgZnJvbSB0aGUgY29tcG9uZW50XG4gIEBPdXRwdXQoKSBwYXNzd29yZENoYW5nZTogRXZlbnRFbWl0dGVyPHN0cmluZz4gPSBuZXcgRXZlbnRFbWl0dGVyPHN0cmluZz4oKTtcbiAgQE91dHB1dCgpIGJsdXJFdmVudCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcblxuICAvLyBGbGFnIGZvciB0aGUgZmEtZXllIHRvIHNob3cgb3IgaGlkZSBwYXNzd29yZFxuICBwdWJsaWMgaGlkZVZhbHVlID0gdHJ1ZTtcbiAgcHVibGljIHBzd2RTdHJlbmd0aDogbnVtYmVyO1xuICBwdWJsaWMgc3RyZW5ndGhQZXJjZW50YWdlID0gMDtcblxuICBwdWJsaWMgZXJyTXNnOiBQYXNzd29yZEVycm9yTXNnO1xuXG4gIC8vIGRlZmF1bHQgbWVzc2FnZXNcbiAgcHJpdmF0ZSByZXF1aXJlZE1zZ1NlZzogc3RyaW5nID0gJyBpcyByZXF1aXJlZC4nO1xuICBwcml2YXRlIG1pbkxlbk1zZ1NlZzE6IHN0cmluZyA9ICcgbXVzdCBiZSBhdCBsZWFzdCAnO1xuICBwcml2YXRlIG1pbkxlbk1zZ1NlZzI6IHN0cmluZyA9ICcgY2hhcmFjdGVycyBpbiBsZW5ndGguJztcbiAgcHJpdmF0ZSBjcml0ZXJpYU1zZzogc3RyaW5nID0gJyBjb250YWlucyBpbnZhbGlkIGNoYXJhY3RlcnMuJztcblxuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gIH1cblxuICBuZ09uSW5pdCgpIHtcblxuICAgIC8vIFNldCBkZWZhdWx0IG1lc3NhZ2VzXG4gICAgdGhpcy5lcnJNc2cgPSAgICB7XG4gICAgICByZXF1aXJlZDogdGhpcy5sYWJlbCArIHRoaXMucmVxdWlyZWRNc2dTZWcsXG4gICAgICBtaW5MZW5ndGg6IHRoaXMubGFiZWwgKyB0aGlzLm1pbkxlbk1zZ1NlZzEgKyB0aGlzLm1pbkxlbiArIHRoaXMubWluTGVuTXNnU2VnMixcbiAgICAgIGNyaXRlcmlhOiB0aGlzLmxhYmVsICsgdGhpcy5jcml0ZXJpYU1zZ1xuICAgIH07XG5cbiAgICAvLyBSZXBsYWNlIGRlZmF1bHQgbWVzc2FnZSBpZiBwcm92aWRlZFxuICAgIGlmICggdGhpcy5lcnJvck1lc3NhZ2VzICkge1xuXG4gICAgICBpZiAoIHRoaXMuZXJyb3JNZXNzYWdlcy5yZXF1aXJlZCApIHtcbiAgICAgICAgdGhpcy5lcnJNc2cucmVxdWlyZWQgPSB0aGlzLmVycm9yTWVzc2FnZXMucmVxdWlyZWQ7XG4gICAgICB9XG5cbiAgICAgIGlmICggdGhpcy5lcnJvck1lc3NhZ2VzLm1pbkxlbmd0aCApIHtcbiAgICAgICAgdGhpcy5lcnJNc2cubWluTGVuZ3RoID0gdGhpcy5lcnJvck1lc3NhZ2VzLm1pbkxlbmd0aDtcbiAgICAgIH1cblxuICAgICAgaWYgKCB0aGlzLmVycm9yTWVzc2FnZXMuY3JpdGVyaWEgKSB7XG4gICAgICAgIHRoaXMuZXJyTXNnLmNyaXRlcmlhID0gdGhpcy5lcnJvck1lc3NhZ2VzLmNyaXRlcmlhO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIG5nT25DaGFuZ2VzKGNoYW5nZXMpIHtcbiAgICBpZiAoY2hhbmdlcy5wYXNzd29yZCAmJiB0aGlzLnBhc3N3b3JkKSB7XG5cbiAgICAgIC8vIENoZWNrIHN0cmVuZ3RoIG9mIHBhc3N3b3JkXG4gICAgICB0aGlzLnBzd2RTdHJlbmd0aCA9IHRoaXMuZ2V0UGFzc3dvcmRTdHJlbmd0aCggdGhpcy5wYXNzd29yZCApO1xuICAgICAgdGhpcy5zdHJlbmd0aFBlcmNlbnRhZ2UgPSAoKHRoaXMucHN3ZFN0cmVuZ3RoICsgMSkgLyA1ICkgKiAxMDA7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFBhc3NlcyB0aGUgdmFsdWUgZW50ZXJlZCBiYWNrIHRvIHRoZSBjYWxsaW5nIGNvbXBvbmVudFxuICAgKiBAcGFyYW0gcGFzc3dvcmQgdmFsdWUgdGhlIHdhcyBlbnRlcmVkIGJ5XG4gICAqL1xuICBzZXRQYXNzd29yZCggcGFzc3dvcmQ6IHN0cmluZyApIHtcbiAgICB0aGlzLnBhc3N3b3JkQ2hhbmdlLmVtaXQoIHBhc3N3b3JkICk7XG4gIH1cblxuICBvbklucHV0Qmx1cigkZXZlbnQpIHtcbiAgICBjb25zb2xlLmxvZyggJ29uQmx1cjogJywgZXZlbnQgKTtcbiAgICB0aGlzLmJsdXJFdmVudC5lbWl0KCBldmVudCApO1xuICB9XG5cbiAgLy8gUHJldmVudCB1c2VyIGZyb20gcGFzdGluZyBkYXRhIGludG8gdGhlIHRleHQgYm94XG4gIEBIb3N0TGlzdGVuZXIoICdkb2N1bWVudDpwYXN0ZScsIFsnJGV2ZW50J10gKVxuICBvblBhc3RlKCBldmVudCApIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHN0cmVuZ3RoIG9mIHRoZSBwYXNzd29yZFxuXG4gICAqICAgIDAgPSB0b28gZ3Vlc3NhYmxlOiByaXNreSBwYXNzd29yZC4gKGd1ZXNzZXMgPCAxMF4zKVxuICAgKiAgICAxID0gdmVyeSBndWVzc2FibGU6IHByb3RlY3Rpb24gZnJvbSB0aHJvdHRsZWQgb25saW5lIGF0dGFja3MuIChndWVzc2VzIDwgMTBeNilcbiAgICogICAgMiA9IHNvbWV3aGF0IGd1ZXNzYWJsZTogcHJvdGVjdGlvbiBmcm9tIHVudGhyb3R0bGVkIG9ubGluZSBhdHRhY2tzLiAoZ3Vlc3NlcyA8IDEwXjgpXG4gICAqICAgIDMgPSBzYWZlbHkgdW5ndWVzc2FibGU6IG1vZGVyYXRlIHByb3RlY3Rpb24gZnJvbSBvZmZsaW5lIHNsb3ctaGFzaCBzY2VuYXJpby4gKGd1ZXNzZXMgPCAxMF4xMClcbiAgICogICAgNCA9IHZlcnkgdW5ndWVzc2FibGU6IHN0cm9uZyBwcm90ZWN0aW9uIGZyb20gb2ZmbGluZSBzbG93LWhhc2ggc2NlbmFyaW8uIChndWVzc2VzID49IDEwXjEwKVxuICAgKlxuICAgKiAgaHR0cHM6Ly9naXRodWIuY29tL2Ryb3Bib3gvenhjdmJuXG4gICAqL1xuICBwcml2YXRlIGdldFBhc3N3b3JkU3RyZW5ndGgoIHBhc3N3b3JkOiBzdHJpbmcgKTogbnVtYmVyIHtcbiAgICAvLyBQYXNzd29yZCBzdHJlbmd0aCBmZWVkYmFja1xuICAgIGNvbnN0IHBzd2RGZWVkYmFjayA9IHp4Y3ZibiggcGFzc3dvcmQgKTtcbiAgICByZXR1cm4gcHN3ZEZlZWRiYWNrLnNjb3JlO1xuICB9XG59XG4iXX0=