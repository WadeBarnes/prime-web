{"version":3,"file":"moh-common-lib.js.map","sources":["ng://moh-common-lib/lib/components/core-breadcrumb/core-breadcrumb.component.ts","ng://moh-common-lib/lib/components/form-action-bar/form-action-bar.component.ts","ng://moh-common-lib/lib/components/page-framework/page-framework.component.ts","ng://moh-common-lib/models/src/base.ts","ng://moh-common-lib/lib/components/password/password.component.ts","ng://moh-common-lib/lib/components/wizard-progress-bar/wizard-progress-bar.component.ts","ng://moh-common-lib/lib/components/date/date.component.ts","ng://moh-common-lib/lib/components/date/day-validation.directive.ts","ng://moh-common-lib/lib/components/date/date-field-format.directive.ts","ng://moh-common-lib/lib/components/date/year-validate.directive.ts","ng://moh-common-lib/lib/components/datepicker/datepicker.component.ts","ng://moh-common-lib/images/src/images.ts","ng://moh-common-lib/lib/components/file-uploader/file-uploader.component.ts","ng://moh-common-lib/lib/components/thumbnail/thumbnail.component.ts","ng://moh-common-lib/lib/components/form-submit-bar/form-submit-bar.component.ts","ng://moh-common-lib/models/src/mask.model.ts","ng://moh-common-lib/lib/components/postal-code/postal-code.component.ts","ng://moh-common-lib/lib/components/page-section/page-section.component.ts","ng://moh-common-lib/lib/components/dropdown/dropdown.component.ts","ng://moh-common-lib/lib/components/toggle/toggle.component.ts","ng://moh-common-lib/lib/shared-core.module.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\n\n/**\n *\n * The base styles for a breadcrumb with slots for content to go.  If you need a\n * complex breadcrumb, the idea is you can extend this CoreBreadcrumb and use\n * the base styles.  There are 3 slots: left, center, and right - all are\n * optional and any configuration works. You select the slot by adding it as an\n * attribute to the top level elements inside of the breadcrumb element.\n *\n *   Example usage:\n *\n *   <common-core-breadcrumb>\n *    <div left>\n *      <a routerLink=\"/provisioner/\">Dashboard</a> /\n *      <strong>Provision by {{ IS_SHOWING_PERSON ? \"User\" : \"Site\" }}</strong>\n *    </div>\n *    <div center></div>\n *    <div right></div>\n *   </common-core-breadcrumb>\n *\n *   @export\n */\n@Component({\n  selector: 'common-core-breadcrumb',\n  templateUrl: './core-breadcrumb.component.html',\n  styleUrls: ['./core-breadcrumb.component.scss']\n})\nexport class CoreBreadcrumbComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n","import { Component, OnInit, Input, Output, EventEmitter, forwardRef } from '@angular/core';\nimport { ControlContainer, NgForm } from '@angular/forms';\n\n@Component({\n  selector: 'common-form-action-bar',\n  templateUrl: './form-action-bar.component.html',\n  styleUrls: ['./form-action-bar.component.scss'],\n  viewProviders: [ { provide: ControlContainer, useExisting: forwardRef(() => NgForm ) } ]\n})\nexport class FormActionBarComponent implements OnInit {\n  @Input() submitLabel: string = 'Continue';\n  @Input() canContinue: boolean = true;\n  @Input() isLoading: boolean = false;\n  @Input() defaultColor: boolean = true;\n  @Output() btnClick: EventEmitter<any> = new EventEmitter<any>();\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n  onClick($event) {\n    if (!this.isLoading && this.canContinue) {\n      this.btnClick.emit($event);\n    }\n    $event.stopPropagation();\n    return false;\n  }\n}\n","import { Component, OnInit, Input, ViewEncapsulation } from '@angular/core';\n\n/**\n * The \"Page Framework\" is a template to be used on FPCare pages to ensure\n * consistent layout.  It applies to most pages, but should NOT be used on\n * Dashboards, or full-width table components.\n *\n * @example\n * <common-page-framework>\n *        <div>This will go in the middle column</div>\n *        <p>So will this</p>\n *        <div aside> This will go in the side column, or tips.</div>\n * </common-page-framework>\n *\n * @export\n */\n@Component({\n  selector: 'common-page-framework',\n  templateUrl: './page-framework.component.html',\n  styleUrls: ['./page-framework.component.scss'],\n  encapsulation: ViewEncapsulation.None,\n})\nexport class PageFrameworkComponent implements OnInit {\n\n  @Input() layout: 'single' | 'double' | 'blank' | 'default' = 'default';\n\n  ngOnInit() {\n  }\n\n}\n","import { UUID } from 'angular2-uuid';\n\n/**\n * Base class.  Components extend this class to have object IDs.\n * NPM package dependencies:\n *  a) moment\n */\nexport class Base {\n\n  /** An identifier for parents to keep track of components */\n  public objectId: string = UUID.UUID().toString();\n\n  constructor() {}\n}\n","import { Component, OnInit, Input, Output, EventEmitter, HostListener, OnChanges, Directive, forwardRef } from '@angular/core';\nimport { Base } from '../../../models/src/base';\nimport { ControlContainer, NgForm } from '@angular/forms';\nimport * as zxcvbn_ from 'zxcvbn';\n// Awkward necessary workaround due to bug in build tools\n// https://github.com/jvandemo/generator-angular2-library/issues/221#issuecomment-355945207\nconst zxcvbn = zxcvbn_;\n\n/**\n * Interface for passing in error messages\n * Example:\n *  errorMessages = {\n *       required: this.componentLabel + ' is required.',\n *       minLength: this.componentLabel + ' must be ' + this.minLen + ' characters.',\n *       criteria: this.componentLabel + ' does not meet password criteria.'\n *     }\n */\nexport interface PasswordErrorMsg {\n  required?: string;\n  minLength?: string;\n  criteria?: string;\n}\n/**\n * PasswordComponent is a text input for a user's password. It includes:\n *\n * - A password strength bar\n * - Minimum length validations\n *\n * Note - if your application has requirements to check things like username is not\n * present in password, we recommend doing this in the (passwordChange) callback.\n *\n * @example\n *       <common-password componentLabel=\"{{newPwdLabel}}\"\n *                      [showPasswordStrength]=\"true\"\n *                      [minLen]=\"pwdMinLen\"\n *                      [pwdCriteria]=\"pwdValidChars\"\n *                      [password]=\"data.password\"\n *                      (passwordChange)=\"setNewPassword($event)\"></common-password>\n *\n * @export\n */\n@Component({\n  selector: 'common-password',\n  templateUrl: './password.component.html',\n  styleUrls: ['./password.component.scss'],\n  /* Re-use the same ngForm that it's parent is using. The component will show\n   * up in its parents `this.form`, and will auto-update `this.form.valid`\n   */\n  viewProviders: [ { provide: ControlContainer, useExisting: forwardRef(() => NgForm ) } ]\n})\nexport class PasswordComponent extends Base implements OnInit, OnChanges {\n\n  // Inputs for the component\n  @Input() label: string = 'Password';\n  @Input() isRequired: boolean = true;\n  @Input() isDisabled: boolean = false;\n  @Input() password: string;\n  @Input() pwdCriteria: string | RegExp;\n  @Input() minLen: string  = '8';\n  @Input() maxLen: string  = '32';\n  @Input() errorMessages: PasswordErrorMsg;\n  @Input() showPasswordStrength: boolean = false;\n  @Input() objectID: string = 'password_' + this.objectId;\n\n\n  // Output from the component\n  @Output() passwordChange: EventEmitter<string> = new EventEmitter<string>();\n  @Output() blurEvent = new EventEmitter();\n\n  // Flag for the fa-eye to show or hide password\n  public hideValue = true;\n  public pswdStrength: number;\n  public strengthPercentage = 0;\n\n  public errMsg: PasswordErrorMsg;\n\n  // default messages\n  private requiredMsgSeg: string = ' is required.';\n  private minLenMsgSeg1: string = ' must be at least ';\n  private minLenMsgSeg2: string = ' characters in length.';\n  private criteriaMsg: string = ' contains invalid characters.';\n\n\n  constructor() {\n    super();\n  }\n\n  ngOnInit() {\n\n    // Set default messages\n    this.errMsg =    {\n      required: this.label + this.requiredMsgSeg,\n      minLength: this.label + this.minLenMsgSeg1 + this.minLen + this.minLenMsgSeg2,\n      criteria: this.label + this.criteriaMsg\n    };\n\n    // Replace default message if provided\n    if ( this.errorMessages ) {\n\n      if ( this.errorMessages.required ) {\n        this.errMsg.required = this.errorMessages.required;\n      }\n\n      if ( this.errorMessages.minLength ) {\n        this.errMsg.minLength = this.errorMessages.minLength;\n      }\n\n      if ( this.errorMessages.criteria ) {\n        this.errMsg.criteria = this.errorMessages.criteria;\n      }\n    }\n  }\n\n  ngOnChanges(changes) {\n    if (changes.password && this.password) {\n\n      // Check strength of password\n      this.pswdStrength = this.getPasswordStrength( this.password );\n      this.strengthPercentage = ((this.pswdStrength + 1) / 5 ) * 100;\n    }\n  }\n\n  /**\n   * Passes the value entered back to the calling component\n   * @param password value the was entered by\n   */\n  setPassword( password: string ) {\n    this.passwordChange.emit( password );\n  }\n\n  onInputBlur($event) {\n    console.log( 'onBlur: ', event );\n    this.blurEvent.emit( event );\n  }\n\n  // Prevent user from pasting data into the text box\n  @HostListener( 'document:paste', ['$event'] )\n  onPaste( event ) {\n      return false;\n  }\n\n  /**\n   * Get the strength of the password\n\n   *    0 = too guessable: risky password. (guesses < 10^3)\n   *    1 = very guessable: protection from throttled online attacks. (guesses < 10^6)\n   *    2 = somewhat guessable: protection from unthrottled online attacks. (guesses < 10^8)\n   *    3 = safely unguessable: moderate protection from offline slow-hash scenario. (guesses < 10^10)\n   *    4 = very unguessable: strong protection from offline slow-hash scenario. (guesses >= 10^10)\n   *\n   *  https://github.com/dropbox/zxcvbn\n   */\n  private getPasswordStrength( password: string ): number {\n    // Password strength feedback\n    const pswdFeedback = zxcvbn( password );\n    return pswdFeedback.score;\n  }\n}\n","import { Component, OnInit, Input, ViewChild, ElementRef,\n         ViewChildren, QueryList, ChangeDetectionStrategy,\n         ChangeDetectorRef, OnDestroy } from '@angular/core';\nimport { Router, NavigationEnd } from '@angular/router';\nimport { filter, map } from 'rxjs/operators';\nimport { Subscription } from 'rxjs';\nimport { WizardProgressItem } from '../../../models/src/container';\n\n/**\n * NPM Dependencies:\n *  a) rxjs\n *  b) ngx-bootstrap\n */\n\n@Component({\n  selector: 'common-wizard-progress-bar',\n  templateUrl: './wizard-progress-bar.component.html',\n  styleUrls: ['./wizard-progress-bar.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class WizardProgressBarComponent implements OnInit, OnDestroy {\n  @Input() progressSteps: WizardProgressItem[] = [];\n  @ViewChild('stepContainer') stepContainer: ElementRef;\n  @ViewChildren('steps') steps: QueryList<ElementRef<HTMLAnchorElement>>;\n\n  public activeIndex: number;\n\n  private routerEvents$: Subscription;\n\n  constructor(private router: Router, private cd: ChangeDetectorRef) {\n   }\n\n  ngOnInit() {\n\n    // Update the progress bar view on route change and _only_ route chaange.\n    // Skip most of Angular's ChangeDetection in favour of manually optimizing.\n    this.routerEvents$ = this.router.events.pipe(\n      filter(ev => ev instanceof NavigationEnd),\n      map((ev: NavigationEnd) => ev.url)\n    ).subscribe(url => {\n      this.activeIndex = this.getActiveIndex(url);\n      this.cd.detectChanges();\n      this.scrollStepIntoView();\n    });\n\n    // Must schedule first run manually, or bar won't be set.\n    this.activeIndex = this.getActiveIndex(this.router.url);\n  }\n\n  ngOnDestroy() {\n    this.cd.detach();\n    this.routerEvents$.unsubscribe();\n  }\n\n  calculateProgressPercentage(): Number {\n    const denominator = this.progressSteps.length;\n    const numerator = this.activeIndex + 1;\n\n    if (denominator === 0 || numerator > denominator) {\n      return 100;\n    }\n\n    // Because we've switched from space-evenly to space-around (for IE), we\n    // have to handle the half-space that space-around adds to the start/end of\n    // the container\n    const halfSpace = 1 / (denominator * 2);\n    return Math.round(((numerator / denominator) - halfSpace) * 100);\n  }\n\n  getActiveIndex(url): number {\n    return this.progressSteps.findIndex(x => url.includes(x.route));\n  }\n\n   /**\n   * Primarily for mobile, this horizontally scrolls the step into view.\n   *\n   * Note - be very careful with any changes to this function because it steps\n   * outside of Angular to call native browser functions.\n   */\n  private scrollStepIntoView() {\n    const target = this.steps.toArray()[this.activeIndex];\n    const container = document.getElementsByClassName('horizontal-scroll');\n    if (container.length === 1) {\n      // Since we're already breaking out of Angular, we try and be safe by using a try/catch.\n      // Otherwise an error here could halt execution,\n      try {\n        container[0].scrollLeft = Math.abs(target.nativeElement.offsetLeft - (window.outerWidth / 2));\n      } catch (error) {}\n    }\n  }\n\n}\n","import { Component, OnInit, Input, Output, EventEmitter, ViewChild, ElementRef, ChangeDetectorRef, forwardRef } from '@angular/core';\nimport { Base } from '../../../models/src/base';\nimport { SimpleDate } from '../../../models/src/simple-date.interface';\nimport { ControlContainer, NgForm, NgModel } from '@angular/forms';\nimport * as moment_ from 'moment';\nconst moment = moment_;\n\n/**\n * Component NPM package dependencies:\n * a) moment\n */\n\nexport interface DateErrorMsg {\n  required: string;\n  dayOutOfRange?: string;\n  yearDistantPast?: string;\n  yearDistantFuture?: string;\n  noPastDatesAllowed?: string;\n  noFutureDatesAllowed?: string;\n  invalidValue?: string;\n}\n\n@Component({\n  selector: 'common-date',\n  templateUrl: './date.component.html',\n  styleUrls: ['./date.component.scss'],\n  /* Re-use the same ngForm that it's parent is using. The component will show\n   * up in its parents `this.form`, and will auto-update `this.form.valid`\n   */\n  viewProviders: [ { provide: ControlContainer, useExisting: forwardRef(() => NgForm ) } ]\n})\nexport class DateComponent extends Base implements OnInit {\n  // Exists for unit testing to validate errors set\n  @ViewChild( 'monthRef' ) monthRef: NgModel;\n  @ViewChild( 'dayRef' ) dayRef: NgModel;\n  @ViewChild( 'yearRef') yearRef: NgModel;\n\n  @Input() useCurrentDate: boolean = false;\n  @Input() required: boolean = true;\n  @Input() disabled: boolean = false;\n  @Input() label: string = 'Date';\n  @Input() date: SimpleDate;\n  /** Can be one of: \"future\", \"past\". \"future\" includes today, \"past\" does not. */\n  @Input() restrictDate: 'future' | 'past' | 'any' = 'any';\n  @Input() errorMessages: DateErrorMsg;\n\n  @Output() dateChange: EventEmitter<SimpleDate> = new EventEmitter<SimpleDate>();\n\n  public monthList: string[] = [\n    'January', 'February', 'March', 'April', 'May', 'June',\n    'July', 'August', 'September', 'October', 'November', 'December'\n  ];\n\n  constructor( private form: NgForm,\n               private cd: ChangeDetectorRef ) {\n    super();\n  }\n\n  ngOnInit() {\n    if ( !this.errorMessages ) {\n      // Use default messages\n      this.errorMessages = {\n        required: this.label + ' is required.',\n        dayOutOfRange: 'Invalid ' + this.label + '.',\n        yearDistantPast: 'Invalid ' + this.label + '.',\n        yearDistantFuture: 'Invalid ' + this.label + '.',\n        noFutureDatesAllowed: 'Invalid ' + this.label + '.',\n        invalidValue: 'Invalid ' + this.label + '.'\n      };\n    }\n\n    if ( this.useCurrentDate ) {\n      // Set date to current date\n      this.date.month = moment().month();\n      this.date.day = moment().date();\n      this.date.year = moment().year();\n    }\n  }\n\n  /** Set the month and notify caller of change */\n  setMonth( value: string ): void {\n    const month = this.getNumericValue( value );\n\n    // console.log( 'monthRef: ', this.monthRef );\n    if ( this.date ) {\n      this.date.month = month;\n      this.triggerDayValidation();\n      this.dateChange.emit( this.date );\n    }\n  }\n\n  /** Set the day and notify caller of change */\n  setDay( value: string ): void {\n    const day = this.getNumericValue( value );\n\n    // console.log(  'dayRef: ', this.dayRef );\n    if ( this.date ) {\n      this.date.day = day;\n      this.dateChange.emit( this.date );\n    }\n  }\n\n  /** Set the yera and notify caller of change */\n  setYear( value: string ): void {\n    const year = this.getNumericValue( value );\n\n    // console.log( 'yearRef: ', this.yearRef );\n    if ( this.date ) {\n      this.date.year = year;\n      this.triggerDayValidation();\n      this.dateChange.emit( this.date );\n    }\n  }\n\n  /**\n   * Force the `day` input to run it's directives again. Important in cases\n   * where user fills fields out of order, e.g. sets days to 31 then month to\n   * Februrary.\n   */\n  private triggerDayValidation() {\n    // We have to wrap this in a timeout, otherwise it runs before Angular has updated the values\n    setTimeout( () => {\n      if ( this.form.controls['day'] ) {\n        // console.log( 'Trigger day validation' );\n        this.form.controls['day'].updateValueAndValidity();\n        this.cd.detectChanges();\n      }\n    }, 0);\n  }\n\n  /** Convert string to numeric value or null if not */\n  private getNumericValue( value: string ): number | null {\n    const parsed = parseInt( value, 10 );\n    return ( isNaN( parsed ) ? null : parsed );\n  }\n}\n","import { Directive, forwardRef } from '@angular/core';\nimport { NG_VALIDATORS, Validator, FormControl } from '@angular/forms';\nimport * as moment_ from 'moment';\nconst moment = moment_;\n\n@Directive({\n  selector: '[commonDayValidation]',\n  providers: [\n    {provide: NG_VALIDATORS, useExisting: forwardRef(() => DayValidationDirective), multi: true}\n  ]\n})\nexport class DayValidationDirective implements Validator {\n\n  validate( control: FormControl ): {[key: string]: any} | null {\n    const date = control.parent.value;\n\n    if ( !control.value ) {\n      return null; // empty value\n    }\n\n    const day: number = parseInt( control.value, 10 );\n    // console.log( 'day: ', day );\n\n    if ( !isNaN( day ) ) {\n\n      // console.log( 'parent: ', date );\n      // Only process of value is numeric\n      if ( !isNaN( date.month )  && !isNaN( date.year ) ) {\n\n        // Determine days in month\n        const str = `${date.year}-${date.month}`;\n        let daysInMonth: number = moment(str, 'YYYY-MM').daysInMonth();\n        // console.log( 'str: ', str + ', dayInMonth: ', daysInMonth );\n\n        if ( isNaN( daysInMonth ) ) {\n          daysInMonth = 31;\n        }\n\n        // Validate days\n        if ( day > daysInMonth || day < 1 ) {\n          return { 'dayOutOfRange': true };\n        }\n      }\n\n      return null;\n    }\n\n    return { 'invalidValue': true };\n  }\n\n}\n","import { Directive, Output, EventEmitter, HostListener } from '@angular/core';\n\n@Directive({\n  selector: '[commonDateFieldFormat]'\n})\nexport class DateFieldFormatDirective {\n\n  @Output() ngModelChange: EventEmitter<string> = new EventEmitter<string>(false);\n\n  @HostListener('input', ['$event'])\n  onInput( event: KeyboardEvent ) {\n    const input = event.target as HTMLInputElement;\n    const maxlen = input.getAttribute( 'maxlength' );\n\n    let trimmed = input.value.trim();\n    if (/[^\\d]+/.test( input.value ) ) {\n\n      trimmed = trimmed.replace(/[^\\d]/g, '');\n    }\n\n    trimmed = trimmed.substr( 0, Number( maxlen ) );\n\n    input.value = trimmed;\n    this.ngModelChange.emit( trimmed );\n  }\n}\n","import { Directive, forwardRef, Input } from '@angular/core';\nimport { NG_VALIDATORS, Validator, FormControl } from '@angular/forms';\nimport * as moment_ from 'moment';\nconst moment = moment_;\n\n// TODO:  Create a message structure to pass in error messages similar to password module.\n\n@Directive({\n  selector: '[commonYearValidate]',\n  providers: [\n    {provide: NG_VALIDATORS, useExisting: forwardRef(() => YearValidateDirective), multi: true}\n  ]\n})\nexport class YearValidateDirective implements Validator  {\n\n  @Input() commonYearValidate: string;\n\n  validate( control: FormControl ): {[key: string]: any} | null {\n    const date = control.parent.value;\n\n    // console.log( 'validate year: ', control.value );\n\n    if ( !control.value ) {\n      return null; // empty value\n    }\n\n    const year: number = parseInt( control.value, 10 );\n\n    // Only process if value is numeric\n    if ( !isNaN(  year ) ) {\n      const currentYear = moment().get( 'y' );\n\n      if ( currentYear - year > 150 ) {\n        return { 'yearDistantPast': true };\n      }\n\n      if ( year - currentYear > 150 ) {\n        return { 'yearDistantFuture': true} ;\n      }\n\n      // Check whether dates can be present or past\n      if ( this.commonYearValidate && this.commonYearValidate !== 'any' &&\n           !isNaN( date.day )  && !isNaN( date.month ) ) {\n\n        const diff = moment( { year: year, month: date.month, day: date.day } )\n          .diff( moment(), 'days', true );\n\n         /**\n          * Validate current date as if it's a future date, and reject it when only\n          * accepting past dates.  We accomplish this by comparing diff against 1.\n          */\n          if ( diff < -1 && this.commonYearValidate === 'future' ) {\n            return { 'noPastDatesAllowed': true };\n          }\n\n          if ( diff >= -1 && this.commonYearValidate === 'past' ) {\n            return { 'noFutureDatesAllowed': true };\n          }\n      }\n\n      return null;\n    }\n\n    return { 'invalidValue': true };\n  }\n\n}\n","import { Component, OnInit, Input, Output, EventEmitter, SimpleChanges, ViewChild, OnChanges, forwardRef } from '@angular/core';\nimport { INgxMyDpOptions, IMyDate, NgxMyDatePickerDirective } from 'ngx-mydatepicker';\nimport * as moment_ from 'moment';\nimport { NgForm, ControlContainer, FormControl, NG_VALUE_ACCESSOR, ControlValueAccessor } from '@angular/forms';\nimport { DateErrorMsg } from '../date/date.component';\nconst moment = moment_;\n\n\n/**\n * PRIME datepicker component. Largely a wrapper for ngx-mydatepicker\n * https://github.com/kekeh/ngx-mydatepicker\n *\n * NOTE - YOU MUST INCLUDE NGX-MYDATEPICKER IN YOUR PARENT APPLICATION TO USE\n * THIS COMPONENT!  This is due to some poor implementation in ngx-mydatepicker.\n * Make sure to use the same version that this library uses.\n */\n@Component({\n  selector: 'common-datepicker',\n  templateUrl: './datepicker.component.html',\n  styleUrls: ['./datepicker.component.scss'],\n  /* Re-use the same ngForm that it's parent is using. The component will show\n   * up in its parents `this.form`, and will auto-update `this.form.valid`\n   */\n  viewProviders: [ { provide: ControlContainer, useExisting: forwardRef(() => NgForm ) } ],\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      multi: true,\n      useExisting: forwardRef(() => DatepickerComponent)\n    }\n  ]\n})\nexport class DatepickerComponent implements OnInit, OnChanges, ControlValueAccessor {\n  /** Component size can be reduced, see Datepickersizes for options */\n  @Input() size: DatepickerSizes = DatepickerSizes.DEFAULT;\n  @Input() date: Date;\n  @Output() dateChange = new EventEmitter<Date>();\n  @Input() disabled: boolean;\n  @Input() labelText: string;\n\n  @Input() required: boolean = false;\n\n\n  /** Dates **before** disableUntil will not be valid selections.  Maps to a ngx-mydatepicker option, but we convert IMyDate to Date  */\n  @Input() disableUntil: Date;\n\n  /** Dates **after** disableSince will not be valid selections.  Maps to a ngx-mydatepicker option, but we convert IMyDate to Date */\n  @Input() disableSince: Date;\n\n  /** Equivalent to setting disableBefore to tomorrow. */\n  @Input() onlyFutureDates: boolean;\n\n  /**\n   * Control visibility of the clear 'x' button on the mini datepicker.\n   *\n   * **'visible'** is default, button exists\n   *\n   * **'none'** means the element does not exist\n   *\n   * **'invisible'** means the element takes up space but is not visible / cannot be\n   * used.\n   *\n   * Invisible is useful when you want to make sure a datepicker is the same\n   * size as a visible one.\n   */\n  @Input() clearButton: 'visible' | 'invisible' | 'none' = 'visible';\n\n\n\n  /** Format for how to display the date to the user. */\n  @Input() dateFormat: string = 'yyyy/mm/dd';\n\n  @Input() errorMessages: DateErrorMsg;\n\n  /** Datetime model used to interface with ngx-datepicker. */\n  // model: any;\n  model: any;\n\n  // Make enum accessible in HTML\n  DatepickerSizes: typeof DatepickerSizes = DatepickerSizes;\n\n  @ViewChild('dp') ngxdp: NgxMyDatePickerDirective;\n\n  /** Default options for wrapped ngx-datepicker. */\n  datepickerOptions: INgxMyDpOptions;\n\n  public _onChange = (_: any) => {};\n  public _onTouched = () => {};\n\n  constructor() { }\n\n  convertDateToSimpleDate(date: Date): IMyDate {\n    if (date === null || date === undefined) { return null; }\n    return {\n      year: date.getFullYear(),\n      month: date.getMonth() + 1,\n      day: date.getDate(),\n    };\n  }\n  convertSimpleDateToDate(date: IMyDate): Date {\n    // When ngx-mydatepicker is cleared, it returns {year: 0, month: 0, day: 0}\n    if (date.year === 0) {\n      return null;\n    }\n    return new Date(date.year, date.month - 1, date.day);\n  }\n\n  isDate(x: any): x is Date {\n    if (!x) { return false; }\n    return x.getDate !== undefined;\n  }\n\n  ngOnInit() {\n    if (!this.errorMessages) {\n      this.errorMessages = {\n        required: this.labelText + ' is required.',\n        dayOutOfRange: 'Invalid ' + this.labelText + '.',\n        yearDistantPast: 'Invalid ' + this.labelText + '.',\n        yearDistantFuture: 'Invalid ' + this.labelText + '.',\n        noFutureDatesAllowed: 'Invalid ' + this.labelText + '.',\n        invalidValue: 'Invalid ' + this.labelText + '.'\n      };\n    }\n\n    this.datepickerOptions = {\n      dateFormat: this.dateFormat,\n      sunHighlight: false,\n      appendSelectorToBody: true,\n    };\n\n    if (this.size === DatepickerSizes.MINI) {\n      // Set width/height to 4/5 of default\n      this.datepickerOptions.selectorHeight = '185px';\n      this.datepickerOptions.selectorWidth = '201px';\n    }\n\n    if (this.isDate(this.disableSince)) {\n      this.datepickerOptions.disableSince = this.convertDateToSimpleDate(this.disableSince);\n    }\n\n    if (this.isDate(this.disableUntil)) {\n      this.datepickerOptions.disableUntil = this.convertDateToSimpleDate(this.disableSince);\n    }\n\n    if (this.onlyFutureDates) {\n      const today = new Date();\n      this.datepickerOptions.disableUntil = this.convertDateToSimpleDate(today);\n    }\n\n    console.log('Datepicker ngOnInit', this.date);\n\n\n    if (this.date) {\n      // Even if jsdate winds up being undefined, even defining this.model will\n      // set the input as non-empty and it'll satisfy the 'required' validation.\n      // So, we only add the model if there's actual data.\n      this.model = {\n        jsdate: this.date\n      };\n    }\n\n\n  }\n\n\n  ngOnChanges(changes: SimpleChanges) {\n    // Parent component has passed in null, so we have to manually clear the input. This leads to 2 change detection cycles.\n    // We could refactor it down to one, but the performance hit is minimal for such a simple component.\n    if (this.date === null) {\n      this.clearDate();\n      this._onChange(null);\n      this._onTouched();\n    }\n  }\n\n  onDateChanged(event): void {\n    if (event.jsdate || event.jsdate === null) {\n      // Always emit a Date (or null)\n      this.dateChange.emit(event.jsdate);\n      this._onChange(event.jsdate);\n      this._onTouched();\n    }\n  }\n\n  clearDate() {\n    if (this.ngxdp) {\n      // We don't need to emit here, because by changing date we'll trigger onDateChanged automatically.\n      this.date = null;\n      this.ngxdp.clearDate();\n    }\n  }\n\n  registerOnChange(fn: any): void {\n    this._onChange = fn;\n  }\n\n  registerOnTouched(fn: any): void {\n    this._onTouched = fn;\n  }\n\n  writeValue(obj: any): void {\n    this.model = {\n      jsdate: obj\n    };\n  }\n\n}\n\nexport enum DatepickerSizes {\n  MINI = 'mini',\n  DEFAULT = 'default'\n}\n","import { UUID } from 'angular2-uuid';\n\n// NOTE: If you change anything in this enum, check image-error-modal.component.html for tests and file-uploader.component.ts:\nexport enum CommonImageError {\n    WrongType,\n    TooSmall,\n    TooBig,\n    AlreadyExists,\n    Unknown,\n    CannotOpen,\n    PDFnotSupported,\n    CannotOpenPDF,\n}\n\nexport class CommonImageProcessingError {\n    commonImage?: CommonImage;\n    rawImageFile?: File;\n    maxSizeAllowed?: number;\n    // added errorDescription.PDF.JS gives proper error messages as invalid pdf structure or password protected pdf.Good for splunk tracking\n    constructor(public errorCode: CommonImageError, public errorDescription?: string) {\n\n    }\n}\n/**\n * Image as uploaded by user\n */\nexport class CommonImage {\n\n    uuid: string;\n\n    constructor() {\n        this.uuid = UUID.UUID();\n    }\n\n    fileContent: string;\n    contentType: string;\n    // number of bytes.\n    size: number;\n    sizeUnit: string;\n    sizeTxt: string;\n    naturalHeight: number;\n    naturalWidth: number;\n    name: string;\n\n    // file uniqness checksum\n    id: string;\n\n    error?: CommonImageError;\n    attachmentOrder: number = 0;\n}\n\nexport interface CommonImageScaleFactors {\n    widthFactor: number;\n    heightFactor: number;\n\n    scaleDown(scale: number): CommonImageScaleFactors;\n}\n\nexport class CommonImageScaleFactorsImpl implements CommonImageScaleFactors {\n    widthFactor: number;\n    heightFactor: number;\n\n    constructor(wFactor: number, hFactor: number) {\n        this.widthFactor = wFactor;\n        this.heightFactor = hFactor;\n    }\n\n    scaleDown(scale: number): CommonImageScaleFactors {\n        return new CommonImageScaleFactorsImpl(\n            this.widthFactor * scale,\n            this.heightFactor * scale);\n    }\n}\n","import { AfterContentInit, ChangeDetectorRef, Component,\n    ContentChild, ElementRef, EventEmitter, Input, NgZone, OnChanges,\n    OnInit, Output, SimpleChanges, ViewChild, forwardRef, AfterViewInit } from '@angular/core';\nimport { NgForm, ControlContainer } from '@angular/forms';\nimport * as moment from 'moment';\nimport { ModalDirective} from 'ngx-bootstrap';\nimport { PDFJSStatic } from 'pdfjs-dist';\nimport { Observable ,  Observer, fromEvent, merge } from 'rxjs';\nimport {map, filter, flatMap, scan, delay, retryWhen} from 'rxjs/operators';\nimport { CommonImage, CommonImageError, CommonImageProcessingError,\nCommonImageScaleFactors, CommonImageScaleFactorsImpl } from '../../../images/src/public_api';\n// import { MspLogService } from '../../service/log.service';\n// import { MspDataService } from '../../service/msp-data.service';\n// import { BaseComponent } from '../base.component';\n// import { LogEntry } from '../logging/log-entry.model';\n// import {Person} from '../../model/application.model';\nimport {Router} from '@angular/router';\nimport { Base } from '../../../models/src/base';\n// import {ApplicationBase} from '../../model/application-base.model';\n\n// const loadImage = require('blueimp-load-image');\n// const sha1 = require('sha1');\n\nimport * as loadImage_ from 'blueimp-load-image';\nconst loadImage = loadImage_;\nimport * as sha1_ from 'sha1';\nconst sha1 = sha1_;\n\n// const PDFJS: PDFJSStatic = require('pdfjs-dist');\nimport * as PDFJS_ from 'pdfjs-dist';\nconst PDFJS: PDFJSStatic = (PDFJS_ as any);\n\nexport interface FileUploaderMsg {\n    required: string;\n}\n\n// TODO - Remove this and fix tslint issues\n/* tslint:disable:max-line-length*/\n\n@Component({\n    selector: 'common-file-uploader',\n    templateUrl: './file-uploader.component.html',\n    styleUrls: ['./file-uploader.component.scss'],\n    viewProviders: [ { provide: ControlContainer, useExisting: forwardRef(() => NgForm ) } ]\n})\nexport class FileUploaderComponent extends Base\n    implements OnInit, OnChanges, AfterContentInit {\n    // lang = require('./i18n');\n    noIdImage: Boolean = false;\n    private appConstants;\n    @ViewChild('dropZone') dropZone: ElementRef;\n    @ViewChild('browseFileRef') browseFileRef: ElementRef;\n    // @ViewChild('captureFileRef') captureFileRef: ElementRef;\n    @ViewChild('imagePlaceholderRef') imagePlaceholderRef: ElementRef;\n    @ViewChild('selectFileLabel') selectFileLabelRef: ElementRef;\n\n    // @ContentChild('uploadInstruction') uploadInstructionRef: ElementRef;\n    @Input() images: Array<CommonImage> = new Array<CommonImage>(0);\n    @Output() imagesChange: EventEmitter<Array<CommonImage>> = new EventEmitter<Array<CommonImage>>();\n    @Input() id: string;\n    @Input() showError: boolean;\n    @Input() required: boolean = false;\n    @Input() instructionText: string = 'Please upload required ID documents.';\n    @Input() errorMessages: FileUploaderMsg = {required: 'File is required.'};\n\n    @ViewChild('canvas') canvas: ElementRef;\n\n\n    @Output() errorDocument: EventEmitter<CommonImage> = new EventEmitter<CommonImage>();\n\n    constructor(\n                // private dataService: MspDataService,\n                // private logService: MspLogService,\n                private zone: NgZone,\n                private cd: ChangeDetectorRef , private router: Router,\n                private controlContainer: ControlContainer) {\n        super();\n        // this.application = this.getApplicationType();\n    }\n\n    /**\n     * This is created as a workaround to access the form control that binds to\n     * the input[type='file']. We can't access it via the template name bindings\n     * as that isn't working, so instead we access the parent form and then find\n     * the input by name.\n     */\n    get fileControl() {\n        const INPUT_NAME = `fileUploadBrowse-${this.id}`;\n        // note - should be \"this.controlContainer as NgForm\" here, which works,\n        // but fails on compiliation due to secondary entries\n        return (this.controlContainer as any).controls[INPUT_NAME];\n    }\n\n    /**\n     * Return true if file already exists in the list; false otherwise.\n     */\n    static checkImageExists(file: CommonImage, imageList: Array<CommonImage>) {\n        if (!imageList || imageList.length < 1) {\n            return false;\n        } else {\n\n            const sha1Sum = sha1(file.fileContent);\n            for (let i = imageList.length - 1; i >= 0; i--) {\n                // console.log(`compare  ${imageList[i].id} with ${sha1Sum}, result ${imageList[i].id === sha1Sum}`);\n                if (imageList[i].id === sha1Sum) {\n                    console.log(`This file ${file.name} has already been uploaded.`);\n                    return true;\n                }\n            }\n            return false;\n        }\n    }\n\n    /**\n     * A special method to force the rendering of this component.  This is a workaround\n     * because for some unknown reason, AngularJS2 change detector does not detect the\n     * change of the images Array.\n     */\n    forceRender() {\n        this.zone.run(() => {\n        });\n    }\n\n\n    ngOnChanges(changes: SimpleChanges): void {\n        console.log('fileuploader onChanges', changes['images']);\n        // if (changes['images'] && (changes['images'].currentValue.length === 0 &&\n        //   changes['images'].previousValue.length > 0)) {\n        if (changes['images'] && (\n            changes['images'].currentValue.length === 0\n            && changes['images'].previousValue\n            && changes['images'].previousValue.length > 0)\n        ) {\n            this.noIdImage = true;\n        } else {\n            this.noIdImage = false;\n        }\n    }\n\n    /*\n     System processing steps\n\n     1. User clicks browse or drag-n-drops an file\n     2. For browse case, the browser is told to only accept mime type image/*, .JPG, .GIF, .PNG, etc,\n     however user can override and for drag-n-drop we don't can't impose this filter\n     4. Using the HTML5 File API, we open a handle on the file\n     5. Read the filename for later display to the user\n     6. Create a hidden Image element in the browser's DOM\n     7. Read the file's bytes as a DataUrl and copy them into the Image element\n     8. Wait until the Image finishes loading the image\n     9. Read the image element's natural width and height\n     10. Pass the File handle into a HTML5 Canvas lib (we need the XIFF headers to auto rotate, XIFF headers are not available in DataUrl)\n     11. The Canvas errors because it's a wrong type, e.g., TIFF, we abort and notify user\n     12. Instruct the Canvas lib to keep resizing the image if it exceeds a maximum width or height,\n     extract meta data, and auto-orient based on XIFF metadata.  It uses a \"contain\" operation which retains\n     it's width to height pixel ratio.\n     13. Call a function on the Canvas element to turn the Canvas into a JPEG of quality 50%.\n     14. Once in a Blob with get the blob size in bytes and a human friendly display size\n     15. In order to more easily manage the image, we convert the Blob to a DataUrl again.\n     16. Pass the DataUrl into a hash algorithm to create an identifier and to check if the image has already been uploaded\n     17. Next we check the final size of the image to ensure it's not to small in resolution\n     (arguably this could've been done earlier), if too small we notify user\n     18. Finally, the image is saved into the user's ongoing EA/PA application including localstorage\n     19. The image is displayed to user as a thumbnail\n\n     */\n\n    ngOnInit(): void {\n\n\n        const dragOverStream =\n            fromEvent<DragEvent>(this.dropZone.nativeElement, 'dragover');\n\n        /**\n         * Must cancel the dragover event in order for the drop event to work.\n         */\n        dragOverStream.pipe(map(evt => {\n            return event;\n        })).subscribe(evt => {\n            // console.log('Cancel dragover event.');\n            evt.preventDefault();\n        });\n\n        const dropStream = fromEvent<DragEvent>(this.dropZone.nativeElement, 'drop');\n        const filesArrayFromDrop = dropStream.pipe(\n            map(\n                function (event) {\n                    event.preventDefault();\n                    return event.dataTransfer.files;\n                }\n            ));\n\n        const browseFileStream = fromEvent<Event>(this.browseFileRef.nativeElement, 'change');\n        // const captureFileStream = fromEvent<Event>(this.captureFileRef.nativeElement, 'change');\n\n        merge(merge(browseFileStream).pipe(\n            map(\n                (event) => {\n                    event.preventDefault();\n                    return event.target['files'];\n\n                }\n            )),\n            filesArrayFromDrop).pipe(\n                filter(files => {\n                    console.log('files');\n                    return !!files && files.length && files.length > 0;\n                }),\n                flatMap(\n                    (fileList: FileList) => {\n\n                        return this.observableFromFiles(fileList, new CommonImageScaleFactorsImpl(1, 1));\n                    }\n                ),\n                filter(\n                    (mspImage: CommonImage) => {\n\n                        const imageExists = FileUploaderComponent.checkImageExists(mspImage, this.images);\n                        if (imageExists) {\n                            this.handleError(CommonImageError.AlreadyExists, mspImage);\n                            this.resetInputFields();\n                        }\n                        return !imageExists;\n                    }\n                ),\n                // TODO - Is this necessary? Can likely be removed as it's exactly identical to the preceding.\n                filter((mspImage: CommonImage) => {\n\n                    const imageExists = FileUploaderComponent.checkImageExists(mspImage, this.images);\n                        if (imageExists) {\n                            this.handleError(CommonImageError.AlreadyExists, mspImage);\n                            this.resetInputFields();\n                        }\n                        return !imageExists;\n                    }\n                ),\n                filter((mspImage: CommonImage) => {\n\n                    const imageSizeOk = this.checkImageDimensions(mspImage);\n                        if (!imageSizeOk) {\n                            this.handleError(CommonImageError.TooSmall, mspImage);\n                            this.resetInputFields();\n                        }\n                        return imageSizeOk;\n                    }\n                )\n            ).subscribe(\n            (file: CommonImage) => {\n\n                this.handleImageFile(file);\n                this.resetInputFields();\n            },\n\n            (error) => {\n                console.log('Error in loading image: %o', error);\n\n                /**\n                 * Handle the error if the image is gigantic that after\n                 * 100 times of scaling down by 30% on each step, the image\n                 * is still over 1 MB.\n                 */\n                if (error.errorCode) {\n                    if (CommonImageError.TooBig === error.errorCode) {\n                        this.handleError(CommonImageError.TooBig, error.image);\n                    } else if (CommonImageError.CannotOpen === error.errorCode) {\n                        if (!error.image) {\n                            error.image = new CommonImage();\n                            if (error.rawImageFile) {\n                                error.image.name = error.rawImageFile.name;\n                            }\n                        }\n                        this.handleError(CommonImageError.CannotOpen, error.image);\n                    } else if (CommonImageError.CannotOpenPDF === error.errorCode) {\n                        this.handleError(CommonImageError.CannotOpenPDF, error.image, error.errorDescription);\n                    } else {\n                        throw error;\n                    }\n                }\n\n\n            },\n            () => {\n                console.log('completed loading image');\n            }\n        );\n    }\n\n    test(var1) {\n        console.log(var1);\n    }\n\n    ngAfterContentInit() {\n\n        const imagePlaceholderEnterKeyStream = merge(\n            fromEvent<Event>(this.imagePlaceholderRef.nativeElement, 'keyup'),\n            fromEvent<Event>(this.selectFileLabelRef.nativeElement, 'keyup'),\n            // fromEvent<Event>(this.uploadInstructionRef.nativeElement, 'keyup')\n        ).pipe(filter((evt: KeyboardEvent) => evt.key === 'Enter'));\n\n        merge(\n            fromEvent<Event>(this.imagePlaceholderRef.nativeElement, 'click'),\n            // fromEvent<Event>(this.uploadInstructionRef.nativeElement, 'click'),\n            imagePlaceholderEnterKeyStream\n        ).pipe(\n            map((event) => {\n                event.preventDefault();\n                return event;\n            })\n        ).subscribe( (event) => { this.browseFileRef.nativeElement.click(); });\n    }\n\n    /**\n     * Solve size in this equation: size * 0.8to-the-power-of30 < 1MB, size\n     * will be the max image size this application can accept and scale down\n     * to under 1MB. In this case: size < 807 MB\n     *\n     * 30 is the number of retries. the value for maxRetry passed to retryStrategy\n     * function.\n     *\n     * If: size * 0.8to-the-power-of40 < 1MB, then size < 1262 MB.\n     *\n     * Note: 0.8 is the self.appConstants.images.reductionScaleFactor defined in global.js\n     *\n     *\n     * @param file\n     * @param scaleFactors\n     */\n    observableFromFiles(fileList: FileList, scaleFactors: CommonImageScaleFactors) {\n        /** Previously this was set in appConstants, but that's removed from the common lib. */\n        const reductionScaleFactor = 0.8;\n\n        console.log('obserablveFromFiles');\n\n        // Init\n        const self = this;\n    //    let  pageNumber = Math.max(...self.images.concat( self.application.getAllImages()).map(function(o) {return o.attachmentOrder; }), 0) + 1 ;\n       let pageNumber = Math.max(...self.images.map(function(o) {return o.attachmentOrder; }), 0) + 1 ;\n\n        // Create our observer\n        const fileObservable = Observable.create((observer: Observer<CommonImage>) => {\n            const mspImages = [];\n            scaleFactors = scaleFactors.scaleDown(reductionScaleFactor);\n            for (let fileIndex = 0; fileIndex < fileList.length; fileIndex++) {\n                const file = fileList[fileIndex];\n                console.log('Start processing file ' + fileIndex + ' of ' + fileList.length + ' %s of size %s bytes %s type', file.name, file.size, file.type);\n\n\n                /* Previously set in appConstants */\n                const pdfScaleFactor = 2.0;\n\n                // let mspImage: MspImage = new MspImage();\n                // let reader: FileReader = new FileReader();\n\n                // // Copy file properties\n                // mspImage.name = file.name;\n                if (file.type === 'application/pdf') {\n                    // this.logService.log({name: file.name + ' Received in Upload',\n                    //     UUID: self.dataService.getMspUuid()}, 'File_Upload');\n\n                    /**\n                     *  Page number logic :\n                     *      Images - Assign current page number whichever is available..so get the current page number , pass it to call back [reserve it] and increment\n                     *      PDF    -  we dont know how many pages..so cant get current number and keep it since it can be multiple pages... so start assigning later point\n                     *      when PDF is totally read..\n                     *\n                     *  */\n\n                    this.readPDF(file, pdfScaleFactor, (images: HTMLImageElement[] , pdfFile: File) => {\n\n\n                        // this.logService.log({name: file.name + 'is successfully split into ' + images.length + ' images',\n                            // UUID: self.dataService.getMspUuid()}, 'File_Upload');\n\n                        images.map((image, index) => {\n                            image.name = pdfFile.name;\n                            this.resizeImage( image, self, scaleFactors, observer, pageNumber , true); // index starts from zero\n                            pageNumber = pageNumber + 1  ;\n                        });\n                    }, (error: string) => {\n                        console.log('error' + JSON.stringify(error));\n                        const imageReadError: CommonImageProcessingError =\n                            new CommonImageProcessingError(CommonImageError.CannotOpenPDF, error);\n                        observer.error(imageReadError);\n                    });\n                } else {\n                    // Load image into img element to read natural height and width\n                    this.readImage(file, pageNumber , (image: HTMLImageElement , imageFile: File , nextPageNumber: number)  => {\n                            image.id = imageFile.name; // .name deprecated, changed image.name to image.id\n                            this.resizeImage(image, self, scaleFactors, observer , nextPageNumber );\n                        },\n\n                        // can be ignored for bug, the log line is never called\n                        (error: CommonImageProcessingError) => {\n                            console.log('error' + JSON.stringify(error));\n                            observer.error(error);\n                        });\n                    pageNumber = pageNumber + 1  ;\n                }\n            }\n\n            // retryWhen is potential issue!\n        }).pipe(retryWhen(this.retryStrategy(32)));\n        return fileObservable;\n    }\n\n\n    private resizeImage( image: HTMLImageElement, self: this, scaleFactors: CommonImageScaleFactors, observer: Observer<CommonImage>, pageNumber: number = 0 , isPdf: boolean = false) {\n// While it's still in an image, get it's height and width\n        const mspImage: CommonImage = new CommonImage();\n        const reader: FileReader = new FileReader();\n        console.log('image.name:' + image.id); // .name deprecated, changed image.name to image.id\n        // Copy file properties\n        mspImage.name = image.id ;\n        if (isPdf) {\n            mspImage.name = image.name + '-page' + pageNumber;  // Just give name to pdf\n        }\n        // Temporary so we don't have duplicate file names. TODO: Improve.\n        //   mspImage.name += Math.ceil(Math.random()*100);\n        mspImage.attachmentOrder = pageNumber ;\n\n\n        mspImage.naturalWidth = image.naturalWidth;\n        mspImage.naturalHeight = image.naturalHeight;\n\n        console.log(`image file natural height and width:\n            ${mspImage.naturalHeight} x ${mspImage.naturalWidth}`);\n\n        // Canvas will force the change to a JPEG\n        mspImage.contentType = 'image/jpeg'; // previously in appConstants\n\n        // Scale the image by loading into a canvas\n\n        console.log('Start scaling down the image using blueimp-load-image lib: ');\n        const scaledImage = loadImage(\n            image.src, // NOTE: we pass the File ref here again even though its already read because we need the XIFF metadata\n            function (canvas: HTMLCanvasElement, metadata: any) {\n\n                // Canvas may be an Event when errors happens\n                if (canvas instanceof Event) {\n                    self.handleError(CommonImageError.WrongType, mspImage);\n                    self.resetInputFields();\n                    return;\n                }\n                // Convert to blob to get size\n                canvas.toBlob((blob: Blob) => {\n                        // Copy the blob properties\n                        mspImage.size = blob.size;\n\n                        // log image info (but only for the first time before any scaling)\n                        // if (s\n\n                        const fileName = mspImage.name;\n                        const nBytes = mspImage.size;\n                        let fileSize = '';\n                        let fileSizeUnit = '';\n                        let sOutput: string = nBytes + ' bytes';\n                        // optional code for multiples approximation\n                        for (let aMultiples = ['KiB', 'MiB', 'GiB', 'TiB', 'PiB', 'EiB', 'ZiB', 'YiB'],\n                                 nMultiple = 0, nApprox = nBytes / 1024; nApprox > 1; nApprox /= 1024, nMultiple++) {\n\n                            sOutput = nApprox.toFixed(3) + ' ' + aMultiples[nMultiple] + ' (' + nBytes + ' bytes)';\n                            fileSize = nApprox.toFixed(0);\n                            fileSizeUnit = aMultiples[nMultiple];\n                            mspImage.sizeUnit = fileSizeUnit;\n                        }\n\n                        console.log(`File ${fileName} is scaled down to: ${sOutput}`);\n                        mspImage.sizeTxt = sOutput;\n\n                        // call reader with new transformed image\n                        reader.onload = function (evt: any) {\n\n                            mspImage.fileContent = evt.target.result;\n                            mspImage.id = sha1(mspImage.fileContent);\n\n                            // keep scaling down the image until the image size is\n                            // under max image size\n\n                            /** previously in appConstants */\n                            const maxSizeBytes = 1048576;\n                            if (mspImage.size > maxSizeBytes) {\n\n                                console.log('File size after scaling down: %d, max file size allowed: %d',\n                                    mspImage.size, maxSizeBytes);\n\n                                const imageTooBigError: CommonImageProcessingError =\n                                    new CommonImageProcessingError(CommonImageError.TooBig);\n\n                                imageTooBigError.maxSizeAllowed = maxSizeBytes;\n                                imageTooBigError.commonImage = mspImage;\n\n                                observer.error(imageTooBigError);\n                            } else {\n                                // log image info\n                                //   self.logImageInfo(\"msp_file-uploader_after_resize_attributes\", self.dataService.getMspUuid(), mspImage);\n                                observer.next(mspImage);\n                            }\n                        };\n                        reader.readAsDataURL(blob);\n                    },\n\n                    // What mime type to make the blob as and jpeg quality\n                    'image/jpeg', 0.5);\n            },\n            {\n                maxWidth: 2600 * scaleFactors.widthFactor,\n                maxHeight: 3300 * scaleFactors.heightFactor,\n                contain: true,\n                canvas: true,\n                meta: true,\n                orientation: true\n            }\n        );\n    }\n\n    /**\n     * Max retry scaling down for maxRetry times.\n     */\n    retryStrategy(maxRetry: number) {\n        return function (errors: Observable<CommonImageProcessingError>) {\n\n            /**Done: COMPLETE THIS! For some reason can't get scan() to work, types always malformed.*/\n\n            // return errors.pipe(\n            //     // scan((acc, curr) => {acc + curr}, 0)\n            //     scan((acc, error, index) => {\n            //         return acc + error;\n            //     }, 0)\n            // );\n\n            // Done: Unsure if we have to re-implement this line. It causes errors, but simply removing it may not be appropriate.\n            // NOTE: RxJS-compat might be saving us here and \"fixing\" the errors. See if errors return when we remove rxjs-compat.\n            // return errors.pipe(scan((acc, curr) => acc + curr, 0))\n\n\n            return errors.pipe(scan(\n                // return errors.pipe(\n                (acc, error: any, index) => {\n                    // console.log('Error encountered: %o', error);;\n\n                    /**\n                     * If the error is about file too big and we have not reach max retry\n                     * yet, theyt keep going to scaling down.\n                     */\n                    if (acc < maxRetry && error.errorCode === CommonImageError.TooBig) {\n                        // console.log('Progressively scaling down the image, step %d.', index);\n                        return acc + 1;\n                    } else {\n                        /**\n                         * For either conditions terminate the retry, propogate\n                         * the error.\n                         *\n                         * 1. errors such as CannotRead or any other unknown errors\n                         * not listed in MspImageError enum\n                         * 2. Exceeded maxRetry\n                         *\n                         */\n                        console.log('Re-throw this image process error: %o', error);\n                        throw error;\n                    }\n                }, 0\n            ), delay(2));\n        };\n    }\n\n    private readImage(imageFile: File, nextPageNumber: number ,\n                      callback: (image: HTMLImageElement, imageFile: File , nextPageNumber: number) => void,\n                      invalidImageHanlder: (error: CommonImageProcessingError) => void) {\n        const reader = new FileReader();\n\n        reader.onload = function (progressEvt: ProgressEvent) {\n\n            console.log('loading image into an img tag: %o', progressEvt);\n            // Load into an image element\n            const imgEl: HTMLImageElement = document.createElement('img');\n            imgEl.src = (reader.result as string);\n\n            // Wait for onload so all properties are populated\n            imgEl.onload = (args) => {\n                console.log('Completed image loading into an img tag: %o', args);\n                return callback(imgEl, imageFile, nextPageNumber);\n            };\n\n            imgEl.onerror =\n                (args) => {\n\n                    // log it to the console\n                    console.log('This image cannot be opened/read, it is probably an invalid image. %o', args);\n\n                    // throw new Error('This image cannot be opened/read');\n                    const imageReadError: CommonImageProcessingError =\n                        new CommonImageProcessingError(CommonImageError.CannotOpen);\n\n                    imageReadError.rawImageFile = imageFile;\n\n                    return invalidImageHanlder(imageReadError);\n                };\n        };\n\n        reader.readAsDataURL(imageFile);\n    }\n\n    private readPDF(pdfFile: File, pdfScaleFactor: number,\n                    callback: (image: HTMLImageElement[], pdfFile: File) => void, error: (errorReason: any) => void) {\n\n        PDFJS.disableWorker = true;\n        PDFJS.disableStream = true;\n\n        const reader = new FileReader();\n        let currentPage = 1;\n        const canvas = document.createElement('canvas');\n        const imgElsArray: HTMLImageElement[] = [];\n        const ctx = canvas.getContext('2d');\n        reader.onload = function (progressEvt: ProgressEvent) {\n\n            const docInitParams = {data: reader.result};\n            // TODO - The 'as any' was added when porting to common library from MSP\n            PDFJS.getDocument((docInitParams as any)).then((pdfdoc) => {\n                const numPages = pdfdoc.numPages;\n                if (currentPage <= pdfdoc.numPages) { getPage(); }\n\n                function getPage() {\n                    pdfdoc.getPage(currentPage).then(function (page) {\n                        const viewport = page.getViewport(pdfScaleFactor);\n\n                        canvas.height = viewport.height;\n                        canvas.width = viewport.width;\n\n                        const renderContext = {\n                            canvasContext: ctx,\n                            viewport: viewport\n                        };\n\n                        page.render(renderContext).then(function () {\n                            const imgEl: HTMLImageElement = document.createElement('img');\n                            imgEl.src = canvas.toDataURL();\n                            imgElsArray.push(imgEl);\n                            if (currentPage < numPages) {\n                                currentPage++;\n                                getPage();\n                            } else {\n                                callback(imgElsArray, pdfFile);\n                            }\n\n                        });\n                    }, function (errorReason: string) {\n                        error(errorReason);\n\n                    });\n                }\n            }, function (errorReason: string) {\n                error(errorReason);\n            });\n\n        };\n        reader.readAsArrayBuffer(pdfFile);\n\n    }\n\n\n    /**\n     * Non reversible image filter to take an existing canvas and make it gray scale\n     * @param canvas\n     */\n    makeGrayScale(canvas: HTMLCanvasElement): void {\n        const context = canvas.getContext('2d');\n\n        const imageData = context.getImageData(0, 0, canvas.width, canvas.height);\n        const data = imageData.data;\n\n        for (let i = 0; i < data.length; i += 4) {\n            const brightness = 0.34 * data[i] + 0.5 * data[i + 1] + 0.16 * data[i + 2];\n            // red\n            data[i] = brightness;\n            // green\n            data[i + 1] = brightness;\n            // blue\n            data[i + 2] = brightness;\n        }\n\n        // overwrite original image\n        context.putImageData(imageData, 0, 0);\n    }\n\n\n    handleImageFile(mspImage: CommonImage) {\n        console.log('image size (bytes) after compression: ' + mspImage.size);\n        if (this.images.length >= 50) {\n\n            // log it\n            // this.logImageInfo('msp_file-uploader_error', this.dataService.getMspUuid(),\n            //     mspImage, `Number of image files exceeds max of ${50}`);\n\n            // log to console\n            console.log(`Max number of image file you can upload is ${50}.\n      This file ${mspImage.name} was not uploaded.`);\n        } else {\n            this.images.push(mspImage);\n            this.imagesChange.emit(this.images);\n            this.showError = false;\n            this.noIdImage = false;\n        }\n    }\n\n    handleError(error: CommonImageError, mspImage: CommonImage, errorDescription?: string) {\n\n        if (!mspImage) {\n            mspImage = new CommonImage();\n        }\n        // just add the error to mspImage\n        mspImage.error = error;\n\n        // log the error\n        if (error !== CommonImageError.PDFnotSupported) {\n            // this.logImageInfo('msp_file-uploader_error', this.dataService.getMspUuid(), mspImage,\n            //     '  mspImageFile: ' + mspImage.name + '  mspErrorNum: ' + error + '  mspError: ' +\n            //     error + '-' + errorDescription);\n        }\n\n        // console.log(\"error with image: \", mspImage);\n        this.errorDocument.emit(mspImage);\n    }\n\n    /**\n     * Reset input fields so that user can delete a file and\n     * immediately upload that file again.\n     */\n    resetInputFields() {\n        // let brosweFileInputElement = this.browseFileRef.nativeElement;\n        // let captureFileInputElement = this.captureFileRef.nativeElement;\n        this.browseFileRef.nativeElement.value = '';\n        // this.captureFileRef.nativeElement.value = '';\n    }\n\n    deleteImage(mspImage: CommonImage) {\n        this.resetInputFields();\n        this.images = this.images.filter(x => x.uuid !== mspImage.uuid);\n        this.imagesChange.emit(this.images);\n\n        // If there are no images yet, we have to reset the input so it triggers 'required'.\n        if ( this.required && this.images.length <= 0 ) {\n            console.log('No images, resetting input');\n            // this.fileControl.value = '';\n            this.fileControl.setErrors({'required': true});\n        }\n    }\n\n    /**\n     * Log image attributes\n     * @param mspImage\n     */\n    private logImageInfo(title: string, applicationId: string, mspImage: CommonImage, additionalInfo?: string) {\n\n        // TODO!\n        // // create log entry\n        // const log: LogEntry = new LogEntry();\n        // log.applicationId = applicationId;\n        // const now = moment();\n        // log.mspTimestamp = now.toISOString();\n        // log.applicationPhase = title + ':  mspImageId: ' + mspImage.id\n        //     + '  mspImageUuid: ' + mspImage.uuid\n        //     + '  mspImageSize: ' + mspImage.size\n        //     + '  mspImageWidth: ' + mspImage.naturalWidth\n        //     + '  mspImageHeight: ' + mspImage.naturalHeight\n        //     + '  mspImageContentType: ' + mspImage.contentType\n        //     + (additionalInfo ? '  ' + additionalInfo : '');\n\n        // // send it while subscribing to response\n        // this.logService.logIt(log, title).subscribe(\n        //     (response) => {\n        //         // console.log('log rest service response: ');\n        //         // console.log(response);\n        //     },\n        //     (error) => {\n        //         console.log('HTTP error response from logging service: ');\n        //         console.log(error);\n        //     },\n        //     () => {\n        //         // console.log('log rest service completed!');\n        //     }\n        // );\n    }\n\n\n\n    /**\n     * Return true if the image size is within range\n     * @param file\n     */\n    checkImageDimensions(file: CommonImage): boolean {\n        if (file.naturalHeight < 0 ||\n            file.naturalWidth < 0 ) {\n            return false;\n        }\n        return true;\n    }\n\n    isValid(): boolean {\n        console.log('isValid', this.images);\n        if (this.required) {\n            return this.images && this.images.length > 0;\n        }\n        return true;\n    }\n    // getApplicationType(): ApplicationBase  {\n    //     if (this.router.url.indexOf('/assistance/') !== -1) {\n    //         return this.dataService.finAssistApp;\n    //     }\n    //     if (this.router.url.indexOf('/application/') !== -1) {\n    //         return this.dataService.getMspApplication();\n    //     }\n    //     if (this.router.url.indexOf('/account/') !== -1) {\n    //         return this.dataService.getMspAccountApp();\n    //     }\n    // }\n\n\n}\n\n","import { Component, ViewChild, OnInit, Input, Output, EventEmitter, ViewContainerRef } from '@angular/core';\nimport { ModalDirective } from 'ngx-bootstrap';\n\nimport { CommonImage } from '../../../images/src/images';\n\n@Component({\n  selector: 'common-thumbnail',\n  templateUrl: './thumbnail.html',\n  styleUrls: ['./thumbnail.scss']\n})\nexport class ThumbnailComponent implements OnInit {\n  @Input() imageObject: CommonImage;\n  @Input() reviewMode: boolean = false;\n  @Output() deleteImage: EventEmitter<CommonImage> = new EventEmitter<CommonImage>();\n  @ViewChild('fullSizeViewModal') public fullSizeViewModal: ModalDirective;\n\n  private viewContainerRef: ViewContainerRef;\n  constructor(viewContainerRef: ViewContainerRef) {\n    this.viewContainerRef = viewContainerRef;\n  }\n\n  scaledWidth: number = 300;\n  ngOnInit() {\n\n    const scaledWidthString: string = (180 * this.imageObject.naturalWidth / this.imageObject.naturalHeight).toFixed(0);\n    // console.log('scaled width: ' + scaledWidthString);\n    this.scaledWidth = parseInt(scaledWidthString, 10);\n\n    if (this.scaledWidth > 250) {\n      // console.log('Scaled width > 250, drop it down to 250');\n      this.scaledWidth = 250;\n    } else if (this.scaledWidth < 30) {\n      this.scaledWidth = 100;\n    }\n\n    if (isNaN(this.scaledWidth)) {\n      this.scaledWidth = 300;\n    }\n  }\n\n  delete(evt: any) {\n    console.log('ThumbnailComponent:Delete from thumbnail: %o', evt);\n    console.log('ThumbnailComponent:imageObject:', JSON.stringify(this.imageObject, null, 2));\n    this.deleteImage.emit(this.imageObject);\n  }\n\n  showFullSizeView() {\n    this.fullSizeViewModal.config.backdrop = false;\n    this.fullSizeViewModal.show();\n  }\n\n  hideFullSizeView() {\n    this.fullSizeViewModal.hide();\n  }\n\n}\n","import { Component, OnInit, Input, Output, EventEmitter, forwardRef } from '@angular/core';\nimport { ControlContainer, NgForm } from '@angular/forms';\n\n\n/**\n * FormSubmitBar is similar to FormActionBar, but it is meant to be used with\n * (ngSubmit) on the form. Make sure to enclose FormSubmitBar inside of the form\n * in question.\n */\n@Component({\n  selector: 'common-form-submit-bar',\n  templateUrl: './form-submit-bar.component.html',\n  styleUrls: ['./form-submit-bar.component.scss'],\n  viewProviders: [ { provide: ControlContainer, useExisting: forwardRef(() => NgForm ) } ]\n})\nexport class FormSubmitBarComponent implements OnInit {\n  @Input() submitLabel: string = 'Continue';\n  @Input() canContinue: boolean = true;\n  @Input() isLoading: boolean = false;\n  @Input() defaultColor: boolean = true;\n  @Output() btnClick: EventEmitter<any> = new EventEmitter<any>();\n\n  /**\n   * Is the component nested inside a form, and not properly full-width in a\n   * page layout? We add negative margins to space out.\n   *\n   * Currently tihs only works for the 'blank' layout type for the page\n   * framework, but would be easy to extend by adding more negative classes as\n   * need be.\n   */\n  @Input() increaseWidth: boolean = false;\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n}\n","// List of constants used for masking inputs\nimport {EventEmitter, Input, Output} from '@angular/core';\nimport { Base } from './base';\n\nexport const LETTER = /[A-Z]/i; // Ignore case here, then upperCase it via pipe.\nexport const NUMBER = /\\d/;\nexport const SPACE = ' ';\n\nexport class MaskModel extends Base {\n\n  @Input() value: string;\n  @Output() valueChange: EventEmitter<string> = new EventEmitter<string>();\n\n  @Input() disabled: boolean = false;\n  @Input() required: boolean = true;\n\n  public mask: any;\n  public placeholder: string;\n\n  constructor() {\n    super();\n  }\n\n  /**\n   * Upper cases letters in string\n   */\n  upperCasePipe(text: string) {\n    return text.toUpperCase();\n  }\n\n  /**\n   * Updates the value\n   */\n  onUpdate( value: string ) {\n\n    // Emit value without spaces\n    this.valueChange.emit( value );\n  }\n}\n","import { Component, OnInit, Input } from '@angular/core';\nimport { ControlContainer, NgForm } from '@angular/forms';\nimport { MaskModel, LETTER, NUMBER, SPACE } from '../../../models/src/mask.model';\n\n@Component({\n  selector: 'common-postal-code',\n  templateUrl: './postal-code.component.html',\n  styleUrls: ['./postal-code.component.scss'],\n\n  // Re-use the same ngForm that it's parent is using. The component will show\n  // up in its parents `this.form`, and will auto-update `this.form.valid`\n  viewProviders: [ { provide: ControlContainer, useExisting: NgForm }]\n})\nexport class PostalCodeComponent extends MaskModel implements OnInit {\n\n  @Input() label: string = 'Postal Code';\n  @Input() displayMask: boolean = true;\n  @Input() maxlen: string = '250';\n  @Input() placeholder: string = 'A1A 1A1';\n\n  public pcFormat: RegExp = /^[A-Za-z][0-9][A-Za-z]\\s?[0-9][A-Za-z][0-9]$/;\n\n\n  constructor() {\n    super();\n    this.mask = [LETTER, NUMBER, LETTER, SPACE, NUMBER, LETTER, NUMBER];\n   }\n\n  ngOnInit() {\n  }\n}\n","import { Component, OnInit, Input, ViewEncapsulation } from '@angular/core';\n\n@Component({\n  selector: 'common-page-section',\n  templateUrl: './page-section.component.html',\n  styleUrls: ['./page-section.component.scss'],\n  encapsulation: ViewEncapsulation.None\n})\nexport class PageSectionComponent implements OnInit {\n\n  @Input() layout: 'double' | 'tips' | 'noTips' = 'tips';\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n","import { Component, OnInit, Input, forwardRef } from '@angular/core';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\n\n@Component({\n  selector: 'common-dropdown',\n  templateUrl: './dropdown.component.html',\n  styleUrls: ['./dropdown.component.scss'],\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      multi: true,\n      useExisting: forwardRef(() => DropdownComponent)\n    }\n  ]\n})\nexport class DropdownComponent implements OnInit, ControlValueAccessor {\n  public model: any;\n\n  @Input() items = [];\n  @Input() label: string = 'Default label';\n  @Input() placeholder: string;\n  @Input() autocorrect: string;\n  @Input() addTag: boolean = false;\n  @Input() addTagText: string = 'Add';\n  @Input() required: boolean;\n\n  public _onChange = (_: any) => {};\n  public _onTouched = () => {};\n\n\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n  writeValue(value: any): void {\n    this.model = value;\n    // TODO - is markForCheck() necessary?\n  }\n\n  registerOnChange(fn: any): void {\n    this._onChange = fn;\n  }\n\n  registerOnTouched(fn: any): void {\n    this._onTouched = fn;\n  }\n\n}\n","import { Component, OnInit, Input, Output, EventEmitter } from '@angular/core';\nimport { Base } from '../../../models/src/base';\n\n@Component({\n  selector: 'common-toggle',\n  templateUrl: './toggle.component.html',\n  styleUrls: ['./toggle.component.scss']\n})\nexport class ToggleComponent extends Base implements OnInit {\n\n  @Input() data: boolean;\n  @Input() label: string;\n  @Output() dataChange: EventEmitter<boolean> = new EventEmitter<boolean>();\n\n  constructor() {\n    super();\n  }\n\n  ngOnInit() {\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { CoreBreadcrumbComponent } from './components/core-breadcrumb/core-breadcrumb.component';\nimport { FormActionBarComponent } from './components/form-action-bar/form-action-bar.component';\nimport { PageFrameworkComponent } from './components/page-framework/page-framework.component';\nimport { PasswordComponent } from './components/password/password.component';\nimport { WizardProgressBarComponent } from './components/wizard-progress-bar/wizard-progress-bar.component';\nimport { NgForm, FormsModule } from '@angular/forms';\nimport { ProgressbarModule, ModalModule } from 'ngx-bootstrap';\nimport { RouterModule } from '@angular/router';\nimport { DateComponent } from './components/date/date.component';\nimport { DayValidationDirective } from './components/date/day-validation.directive';\nimport { DateFieldFormatDirective } from './components/date/date-field-format.directive';\nimport { YearValidateDirective } from './components/date/year-validate.directive';\nimport { DatepickerComponent } from './components/datepicker/datepicker.component';\nimport { NgxMyDatePickerModule } from 'ngx-mydatepicker';\nimport { FileUploaderComponent } from './components/file-uploader/file-uploader.component';\nimport { ThumbnailComponent } from './components/thumbnail/thumbnail.component';\nimport { FormSubmitBarComponent } from './components/form-submit-bar/form-submit-bar.component';\nimport { TextMaskModule } from 'angular2-text-mask';\nimport { PostalCodeComponent } from './components/postal-code/postal-code.component';\nimport { PageSectionComponent } from './components/page-section/page-section.component';\nimport { DropdownComponent } from './components/dropdown/dropdown.component';\nimport { NgSelectModule } from '@ng-select/ng-select';\nimport { ToggleComponent } from './components/toggle/toggle.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    ProgressbarModule.forRoot(),\n    RouterModule,\n    NgxMyDatePickerModule.forRoot(),\n    ModalModule.forRoot(),\n    TextMaskModule,\n    NgSelectModule\n  ],\n  declarations: [\n    CoreBreadcrumbComponent,\n    FormActionBarComponent,\n    PageFrameworkComponent,\n    PasswordComponent,\n    WizardProgressBarComponent,\n    DateComponent,\n    DayValidationDirective,\n    DateFieldFormatDirective,\n    YearValidateDirective,\n    DatepickerComponent,\n    FileUploaderComponent,\n    ThumbnailComponent,\n    FormSubmitBarComponent,\n    PostalCodeComponent,\n    PageSectionComponent,\n    DropdownComponent,\n    ToggleComponent\n  ],\n  exports: [\n    CoreBreadcrumbComponent,\n    FormActionBarComponent,\n    PageFrameworkComponent,\n    PasswordComponent,\n    WizardProgressBarComponent,\n    DateComponent,\n    DayValidationDirective,\n    DateFieldFormatDirective,\n    YearValidateDirective,\n    DatepickerComponent,\n    FileUploaderComponent,\n    ThumbnailComponent,\n    FormSubmitBarComponent,\n    PostalCodeComponent,\n    PageSectionComponent,\n    DropdownComponent,\n    ToggleComponent\n  ],\n  providers: [\n    NgForm\n  ]\n})\nexport class SharedCoreModule { }\n"],"names":["moment"],"mappings":"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"}
