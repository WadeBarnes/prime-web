<div *ngIf="rowData" class="enrollment-list-item" (click)="toggleRow()" [@openStateDisable]="openState">

  <div class="enrollment-text-container" >
    <ng-container *ngIf="primaryType === 'User'">
      <span class="enrollment-text-main font-weight-bold">{{orgName}}</span>
      <!--<span class="enrollment-text-bold">{{title}} </span>-->
    </ng-container>
    <ng-container *ngIf="primaryType === 'Site'">
      <span class="enrollment-text-bold">{{rowData.title}}  </span>
    </ng-container>
  </div>


  <div *ngIf="(isNew || isAccepted || siteStatus === 'Active')  && primaryType === 'Site'" > <!--dont show it for user-->

    <table>
      <tr>
        <label class="has-float-label">
          <input type="text" class="form-control mb-2 mr-sm-2" id="posuid" name="posuid" placeholder=" " tabindex="1" [(ngModel)]="siteAccessObject.posUserId" (change)="onChange($event)">
          <span>POS User ID</span>
        </label>

        <td><prime-datepicker (change)="onChange($event, rowDataSite.siteAccess[0])" [(date)]="siteAccessObject.provisionedDate" id="DoB" name="DoB" placeholder=" "  dateFormat="yyyy/mm/dd" labelText="Date Provisioned" tabindex="1"></prime-datepicker></td>

      </tr>
  </table>
 </div>

  <div *ngIf="isRejected  && primaryType === 'Site'">  <!--dont show it for user-->
    <div class="col d-inline-flex flex-column">
      <select id="declinedReason2" class="form-control drop-dl-box-15"
              [value]="declinedReasonSelector" >
        <option value="pleaseSelect" disabled selected>Select Reason</option>
        <option *ngFor="let reason of DeclinedReasons" value="{{reason}}">
          {{declinedReasonValue(reason)}}
        </option>
      </select>
    </div>
  </div>

  <!-- TODO: Handle this case.  Note that 'declined' is not the same as 'DeclinedEnrollment" (isRejected). Maybe make a new one, isDeclined? isPreviouslyRejected? Unsure. -->
  <div *ngIf="isPreviouslyRejected  && primaryType === 'Site'">
  <div class="col d-inline-flex flex-column">
    <select id="declinedReason1" class="form-control drop-dl-box-15 color"
          [value]="declinedReasonSelector" disabled>
      <option value="pleaseSelect" selected>{{declinedReasonValue('ACCESS_NO_lONGER_REQUIRED')}}</option>
    </select>
  </div>
</div>

  <div class="enrollment-actions" *ngIf=" primaryType === 'Site'">
      <span class="enrollment-icons">
        <prime-pill-badge
            [alerts]="[siteAccessObject.alert]"
            [iconOnly]='false'>
        </prime-pill-badge>
        <i *ngIf="primaryType === 'Site' && isNew" class="fa fa-flag-o mr-2" style="color: red"></i>
        <i class="fa fa-sticky-note-o mr-2" (click)="goToNotePage()"></i>
        <prime-info-button
            class="mr-2"
            [targetId]="rowData.associatedObjectId">
        </prime-info-button>
        <prime-accept-reject-icons
          *ngIf="isNew"
          (onAccepted)="accept()"
          (onRejected)="reject()"
          labelAccept="Accept Enrollment"
          labelReject="Decline Enrollment"
        ></prime-accept-reject-icons>
      </span>
  </div>
</div>

<div [@growVertical] class="provisioner-table-container table-responsive ml-2 " *ngIf=" (isNew || showProvisionerDetailsRowOverride) && primaryType === 'Site'" >
  <table >
    <tr>
      <td *ngIf="primaryType === 'User'" class="provision-element-label" width = "8%">PEC</td>
      <td *ngIf="primaryType === 'Site'" class="provision-element-label" width = "8%">College Number</td>
      <td *ngIf="primaryType === 'Site'" class="provision-element-label" width = "8%">Licence Number</td>
      <td class="provision-element-label" width = "12%"> Request Type</td>
      <td class="provision-element-label" width = "10%" >User Class</td>
      <td class="provision-element-label" width = "12%"> Access Privileges</td>
      <td class="provision-element-label" width = "8%" >L&amp;C</td>
      <td class="provision-element-label" width = "8%"> Start Date</td>
      <td class="provision-element-label" width = "8%">End Date</td>
      <td class="provision-element-label" width = "20%"> Personal Access</td>
      <td width="2%"></td>
      <td width="12%"></td>
    </tr>
    <tr *ngFor="let rowDataSite of sites()">
      <td *ngIf="primaryType === 'User'" class="provision-element-text">{{rowData.site.PEC}}</td>
      <td *ngIf="primaryType === 'Site'" class="provision-element-text">{{ getCollegeNumber() }}</td>
      <td *ngIf="primaryType === 'Site'" class="provision-element-text">{{ getLicenceNumber() }}</td>
      <td class="provision-element-text"> {{siteAccessObject.request}}</td>
      <td class="provision-element-text">{{siteAccessObject.siteClass}}</td>
      <td class="provision-element-text"> {{siteAccessObject.accessRights}}</td>
      <td class="provision-element-text">{{siteAccessObject.tAndC}}</td>
      <td class="provision-element-text"> {{siteAccessObject.startDateShort}}</td>
      <td class="provision-element-text">{{siteAccessObject.endDateShort}}</td>
      <td class="provision-element-text"> {{siteAccessObject.accessReason}}</td>
      <td></td>
      <td class="mr-2"><input type="checkbox" >L&amp;C Enforceable </td>
    </tr>
  </table>
</div>

<div [@growVertical] class="provisioner-table-container table-responsive ml-2 " *ngIf=" (isNew || showProvisionerDetailsRowOverride) && primaryType === 'User'" >
  <table >
    <tr>
      <td *ngIf="primaryType === 'User'" class="provision-element-label" width = "11%"></td>
      <td *ngIf="primaryType === 'User'" class="provision-element-label" width = "5%">Site Type</td>
      <td *ngIf="primaryType === 'User'" class="provision-element-label" width = "5%">Start Date</td>
      <td *ngIf="primaryType === 'User'" class="provision-element-label" width = "5%">End Date</td>
      <td class="provision-element-label" width = "6%"> POS User ID</td>
      <td class="provision-element-label" width = "6%" >Personal Access</td>
      <td class="provision-element-label" width = "5%">Date Provisioned</td>
      <td class="provision-element-label" width = "6%" >Status</td>
    </tr>
    <tr *ngFor="let rowDataSite of sites">
      <td *ngIf="primaryType === 'User'" class="provision-element-text">
        <!--<input type="text" class="form-control mb-2 mr-sm-2" id="name" name="name" placeholder=" " tabindex="1" [(ngModel)]="rowDataSite.name" (change)="onChange($event)">-->
        {{rowDataSite.name}}
        <prime-info-button [targetId]="rowDataSite.objectId" ></prime-info-button>
      </td>
      <td *ngIf="primaryType === 'User'" class="provision-element-text">
 <!--       <input type="text" class="form-control mb-2 mr-sm-2" id="title" name="title" placeholder=" " tabindex="1" [(ngModel)]="rowDataSite.siteType" (change)="onChange($event)">
 -->  {{ rowDataSite.siteType }}
      </td>



      <td *ngIf="primaryType === 'User'" ><prime-datepicker size="mini" (dateChange)="onChangeStartDate($event ,rowDataSite.siteAccess[0])" [(date)]="rowDataSite.siteAccess[0].startDate" id="startDateShort" name="startDateShort" placeholder=" "  dateFormat="yyyy/mm/dd"  tabindex="1"></prime-datepicker></td>
      <td *ngIf="primaryType === 'User'" ><prime-datepicker size="mini" (dateChange)="onChangeEndDate($event ,rowDataSite.siteAccess[0])" [(date)]="rowDataSite.siteAccess[0].endDateShort" id="endDateShort" name="endDateShort" placeholder=" "  dateFormat="yyyy/mm/dd"  tabindex="1"></prime-datepicker></td>
      <td class="provision-element-label">  <input type="text" class="form-control mb-2 mr-sm-2" id="posuid" (change)="onChange($event , rowDataSite.siteAccess[0])" name="posuid" placeholder=" " tabindex="1" [(ngModel)]="rowDataSite.siteAccess[0].posUserId" (change)="onChange($event, rowDataSite.siteAccess[0])">
      </td>
      <!--Personal Access -->
      <td class="provision-element-label">

        <select class="form-control access-type-selector" [(ngModel)]='rowDataSite.siteAccess[0].personalAccess' (change)="onChange($event, rowDataSite.siteAccess[0])" >
          <option *ngFor="let status of accessType"
                  value="{{status}}">
            {{status}}
          </option>
        </select>

       </td>
      <!-- DateProvisioned -->
      <td class="provision-element-label">
        <prime-datepicker size="mini"  (dateChange)="onChangeprovisionedDate($event ,rowDataSite.siteAccess[0])" [(date)]='rowDataSite.siteAccess[0].provisionedDate' id="provisionDateShort" name="provisionDateShort" placeholder=" "  dateFormat="yyyy/mm/dd"  tabindex="1"></prime-datepicker>
      </td>
      <!--status -->
      <td class="provision-element-label">

        <select class="form-control access-type-selector" [(ngModel)]='rowDataSite.siteAccess[0].status'>
          <option value="{{rowDataSite.siteAccess[0].status}}">{{rowDataSite.siteAccess[0].status != 'Provisioning' ? '' :'Provisioning'}}
          </option>
        </select>

    <!--    <prime-pill-badge
          [alerts]="[rowDataSite.siteAccess[0].alert]"
          [iconOnly]='false'>
        </prime-pill-badge>-->
       </td>


    </tr>
  </table>
</div>
<!--
<div [@openState]="openState">
  <div [@openStateChild]="openState"  class="expandable-container">
    <div class="enrollment-expandable" >
      <prime-enrollment-progress-row
        [open]='true'
        [data]='siteAccessObject'>
      </prime-enrollment-progress-row>
    </div>
  </div>
</div>
-->
